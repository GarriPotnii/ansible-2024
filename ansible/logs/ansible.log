2024-08-19 03:10:10,831 p=11024 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:10:10,853 p=11024 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:10:11,637 p=11024 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: /Users/aleksandr.pintaev/.ssh/key.pem: No such file or directory\r\nubuntu@3.121.22.114: Permission denied (publickey).", "unreachable": true}
2024-08-19 03:10:11,639 p=11024 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:10:11,639 p=11024 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-19 03:11:21,591 p=11113 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:11:21,596 p=11113 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:11:22,360 p=11113 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: /Users/aleksandr.pintaev/.ssh/key.pem: No such file or directory\r\nubuntu@3.121.22.114: Permission denied (publickey).", "unreachable": true}
2024-08-19 03:11:22,361 p=11113 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:11:22,362 p=11113 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-19 03:11:50,050 p=11122 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:11:50,055 p=11122 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:11:53,864 p=11122 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:11:53,865 p=11122 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:11:53,876 p=11122 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:11:55,409 p=11122 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "cmd": ["ip", "-o", "route", "show", "default", "|", "awk", "{print $5}"], "delta": "0:00:00.004523", "end": "2024-08-19 00:11:57.238347", "msg": "non-zero return code", "rc": 1, "start": "2024-08-19 00:11:57.233824", "stderr": "Error: any valid prefix is expected rather than \"|\".", "stderr_lines": ["Error: any valid prefix is expected rather than \"|\"."], "stdout": "", "stdout_lines": []}
2024-08-19 03:11:55,411 p=11122 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:11:55,411 p=11122 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 03:12:46,291 p=11206 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:12:46,296 p=11206 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:12:48,947 p=11206 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:12:48,947 p=11206 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:12:48,959 p=11206 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:12:50,495 p=11206 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "cmd": ["ip", "-o", "route", "show", "default", "|", "awk", "{print $5}"], "delta": "0:00:00.004261", "end": "2024-08-19 00:12:52.323052", "msg": "non-zero return code", "rc": 1, "start": "2024-08-19 00:12:52.318791", "stderr": "Error: any valid prefix is expected rather than \"|\".", "stderr_lines": ["Error: any valid prefix is expected rather than \"|\"."], "stdout": "", "stdout_lines": []}
2024-08-19 03:12:50,497 p=11206 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:12:50,497 p=11206 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 03:15:08,779 p=11235 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:15:08,784 p=11235 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:15:12,660 p=11235 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:15:12,660 p=11235 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:15:12,673 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:15:14,462 p=11235 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:15:14,473 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Set the active network interface name] **************************************************************************************************************************************
2024-08-19 03:15:14,488 p=11235 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:15:14,493 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already] *****************************************************************************************************************************
2024-08-19 03:15:14,501 p=11235 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:15:14,504 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if netplan configuration file exists] *********************************************************************************************************************************
2024-08-19 03:15:16,221 p=11235 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:15:16,229 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name using sed] *************************************************************************************************************
2024-08-19 03:15:17,939 p=11235 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:15:17,947 p=11235 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ************************************************************************************************************************************************
2024-08-19 03:15:17,960 p=11235 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The conditional check 'netplan_try_output.rc == 0' failed. The error was: error while evaluating conditional (netplan_try_output.rc == 0): 'netplan_try_output' is undefined\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/network_interface_rename/tasks/main.yml': line 27, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Apply netplan configuration\n  ^ here\n"}
2024-08-19 03:15:17,960 p=11235 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:15:17,960 p=11235 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 03:16:51,845 p=11284 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:16:51,850 p=11284 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:16:55,818 p=11284 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:16:55,818 p=11284 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:16:55,831 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:16:57,334 p=11284 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:16:57,341 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Set the active network interface name] **************************************************************************************************************************************
2024-08-19 03:16:57,354 p=11284 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:16:57,358 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already] *****************************************************************************************************************************
2024-08-19 03:16:57,365 p=11284 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:16:57,368 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if netplan configuration file exists] *********************************************************************************************************************************
2024-08-19 03:16:58,878 p=11284 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:16:58,884 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name using sed] *************************************************************************************************************
2024-08-19 03:17:00,341 p=11284 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:17:00,348 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ************************************************************************************************************************************************
2024-08-19 03:17:02,612 p=11284 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:17:02,620 p=11284 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ********************************************************************************************************************
2024-08-19 03:17:04,060 p=11284 u=aleksandr.pintaev n=ansible | [WARNING]: conditional statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: renamed_interface.stdout.strip() != "{{ new_interface_name }}"

2024-08-19 03:17:04,067 p=11284 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "cmd": ["ip", "-o", "route", "show", "default", "|", "awk", "{print $5}"], "delta": "0:00:00.004341", "end": "2024-08-19 00:17:05.903576", "failed_when_result": true, "msg": "non-zero return code", "rc": 1, "start": "2024-08-19 00:17:05.899235", "stderr": "Error: any valid prefix is expected rather than \"|\".", "stderr_lines": ["Error: any valid prefix is expected rather than \"|\"."], "stdout": "", "stdout_lines": []}
2024-08-19 03:17:04,068 p=11284 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:17:04,069 p=11284 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=6    changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 03:18:08,743 p=11346 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:18:08,749 p=11346 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:18:12,814 p=11346 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:18:12,815 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:18:12,827 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:18:14,329 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:18:14,336 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Set the active network interface name] **************************************************************************************************************************************
2024-08-19 03:18:14,349 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:18:14,353 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already] *****************************************************************************************************************************
2024-08-19 03:18:14,361 p=11346 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:18:14,364 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if netplan configuration file exists] *********************************************************************************************************************************
2024-08-19 03:18:15,945 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:18:15,953 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name using sed] *************************************************************************************************************
2024-08-19 03:18:17,421 p=11346 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:18:17,429 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ************************************************************************************************************************************************
2024-08-19 03:18:19,714 p=11346 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:18:19,721 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ********************************************************************************************************************
2024-08-19 03:18:21,191 p=11346 u=aleksandr.pintaev n=ansible | [WARNING]: conditional statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: renamed_interface.stdout.strip() != "{{ new_interface_name }}"

2024-08-19 03:18:21,197 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:18:21,207 p=11346 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Display the renamed network interface name] *********************************************************************************************************************************
2024-08-19 03:18:21,222 p=11346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "The network interface is now named net0"
}
2024-08-19 03:18:21,237 p=11346 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:18:21,237 p=11346 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2024-08-19 03:19:40,436 p=11443 u=aleksandr.pintaev n=ansible | PLAY [Execute network_settings role] *************************************************************************************************************************************************************************
2024-08-19 03:19:40,441 p=11443 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:19:44,221 p=11443 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:19:44,221 p=11443 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:19:44,234 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 03:19:45,773 p=11443 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:19:45,782 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Set the active network interface name] **************************************************************************************************************************************
2024-08-19 03:19:45,796 p=11443 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:19:45,800 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already] *****************************************************************************************************************************
2024-08-19 03:19:45,807 p=11443 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:19:45,811 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if netplan configuration file exists] *********************************************************************************************************************************
2024-08-19 03:19:47,365 p=11443 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:19:47,372 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name using sed] *************************************************************************************************************
2024-08-19 03:19:48,791 p=11443 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:19:48,799 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ************************************************************************************************************************************************
2024-08-19 03:19:50,224 p=11443 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:19:50,233 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ********************************************************************************************************************
2024-08-19 03:19:51,765 p=11443 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:19:51,774 p=11443 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Display the renamed network interface name] *********************************************************************************************************************************
2024-08-19 03:19:51,788 p=11443 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "The network interface is now named "
}
2024-08-19 03:19:51,803 p=11443 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:19:51,803 p=11443 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=4    changed=0    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   
2024-08-19 03:32:09,708 p=11706 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 03:32:09,713 p=11706 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:32:13,644 p=11706 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:32:13,645 p=11706 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:32:13,655 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states can be modified] ***************************************************************************************************************************************************
2024-08-19 03:32:15,152 p=11706 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:32:15,160 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states if possible] ********************************************************************************************************************************************************
2024-08-19 03:32:16,659 p=11706 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:32:16,665 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 03:32:18,126 p=11706 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:32:18,134 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states on all CPUs] ********************************************************************************************************************************************************
2024-08-19 03:32:19,667 p=11706 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:32:19,676 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Verify C-states have been disabled] **************************************************************************************************************************************************
2024-08-19 03:32:21,110 p=11706 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:32:21,119 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Display C-states status] *************************************************************************************************************************************************************
2024-08-19 03:32:21,134 p=11706 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "C-states status: "
}
2024-08-19 03:32:21,138 p=11706 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states are disabled] ******************************************************************************************************************************************************
2024-08-19 03:32:21,149 p=11706 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "C-states can be modified."
}
2024-08-19 03:32:21,158 p=11706 u=aleksandr.pintaev n=ansible | RUNNING HANDLER [disable_c_state : Update GRUB] **************************************************************************************************************************************************************
2024-08-19 03:32:22,583 p=11706 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:32:22,597 p=11706 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:32:22,598 p=11706 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=6    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2024-08-19 03:38:54,768 p=11829 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 03:38:54,773 p=11829 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:38:58,692 p=11829 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:38:58,693 p=11829 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:38:58,707 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states can be modified] ***************************************************************************************************************************************************
2024-08-19 03:39:00,270 p=11829 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:39:00,279 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states if possible] ********************************************************************************************************************************************************
2024-08-19 03:39:01,833 p=11829 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:39:01,843 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 03:39:03,312 p=11829 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:39:03,322 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states on all CPUs] ********************************************************************************************************************************************************
2024-08-19 03:39:04,874 p=11829 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:39:04,885 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Verify C-states have been disabled] **************************************************************************************************************************************************
2024-08-19 03:39:06,358 p=11829 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:39:06,370 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Display C-states status] *************************************************************************************************************************************************************
2024-08-19 03:39:06,390 p=11829 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "C-states status: "
}
2024-08-19 03:39:06,395 p=11829 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states are disabled] ******************************************************************************************************************************************************
2024-08-19 03:39:06,407 p=11829 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "C-states can be modified."
}
2024-08-19 03:39:06,418 p=11829 u=aleksandr.pintaev n=ansible | RUNNING HANDLER [disable_c_state : Update GRUB] **************************************************************************************************************************************************************
2024-08-19 03:39:07,874 p=11829 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:39:07,890 p=11829 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:39:07,890 p=11829 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=6    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2024-08-19 03:44:16,927 p=11956 u=aleksandr.pintaev n=ansible | PLAY [Execute CPU performance mode role] *********************************************************************************************************************************************************************
2024-08-19 03:44:16,932 p=11956 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:44:21,062 p=11956 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:44:21,062 p=11956 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:44:21,074 p=11956 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Check current CPU governor] ***************************************************************************************************************************************************
2024-08-19 03:44:22,748 p=11956 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:22,756 p=11956 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Display current CPU governor] *************************************************************************************************************************************************
2024-08-19 03:44:22,770 p=11956 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Current CPU governor: []"
}
2024-08-19 03:44:22,774 p=11956 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Set CPU governor to performance] **********************************************************************************************************************************************
2024-08-19 03:44:24,355 p=11956 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:24,363 p=11956 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Add performance parameters to GRUB configuration] *****************************************************************************************************************************
2024-08-19 03:44:25,959 p=11956 u=aleksandr.pintaev n=ansible | ERROR! The requested handler 'Update GRUB' was not found in either the main handlers list nor in the listening handlers list
2024-08-19 03:44:41,309 p=12004 u=aleksandr.pintaev n=ansible | PLAY [Execute CPU performance mode role] *********************************************************************************************************************************************************************
2024-08-19 03:44:41,313 p=12004 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:44:44,159 p=12004 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:44:44,160 p=12004 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:44:44,171 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Check current CPU governor] ***************************************************************************************************************************************************
2024-08-19 03:44:45,669 p=12004 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:45,677 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Display current CPU governor] *************************************************************************************************************************************************
2024-08-19 03:44:45,691 p=12004 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Current CPU governor: []"
}
2024-08-19 03:44:45,695 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Set CPU governor to performance] **********************************************************************************************************************************************
2024-08-19 03:44:47,169 p=12004 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:47,176 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Add performance parameters to GRUB configuration] *****************************************************************************************************************************
2024-08-19 03:44:48,691 p=12004 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:44:48,699 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Update GRUB configuration] ****************************************************************************************************************************************************
2024-08-19 03:44:50,143 p=12004 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:50,151 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Verify CPU governor has been set to performance] ******************************************************************************************************************************
2024-08-19 03:44:51,611 p=12004 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:51,619 p=12004 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Display new CPU governor] *****************************************************************************************************************************************************
2024-08-19 03:44:51,635 p=12004 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "New CPU governor: []"
}
2024-08-19 03:44:51,647 p=12004 u=aleksandr.pintaev n=ansible | RUNNING HANDLER [enable_performance_cpu : Update GRUB] *******************************************************************************************************************************************************
2024-08-19 03:44:53,145 p=12004 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:44:53,159 p=12004 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:44:53,160 p=12004 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=4    changed=1    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   
2024-08-19 03:46:19,840 p=12104 u=aleksandr.pintaev n=ansible | ERROR! the role 'display_cpu_ht' was not found in /Users/aleksandr.pintaev/projects/ansible/playbooks/roles:/Users/aleksandr.pintaev/projects/ansible/roles:/Users/aleksandr.pintaev/projects/ansible/playbooks

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/playbooks/run_display_cpu_ht.yml': line 5, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  roles:
    - display_cpu_ht
      ^ here

2024-08-19 03:46:44,633 p=12110 u=aleksandr.pintaev n=ansible | ERROR! the role 'display_cpu_ht' was not found in /Users/aleksandr.pintaev/projects/ansible/playbooks/roles:/Users/aleksandr.pintaev/projects/ansible/roles:/Users/aleksandr.pintaev/projects/ansible/playbooks

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/playbooks/run_display_cpu_ht.yml': line 5, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  roles:
    - display_cpu_ht
      ^ here

2024-08-19 03:47:29,353 p=12158 u=aleksandr.pintaev n=ansible | PLAY [Execute display role] **********************************************************************************************************************************************************************************
2024-08-19 03:47:29,357 p=12158 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:47:33,261 p=12158 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:47:33,262 p=12158 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:47:33,275 p=12158 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display list of CPUs] *****************************************************************************************************************************************************************
2024-08-19 03:47:34,762 p=12158 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:47:34,771 p=12158 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Show list of CPUs] ********************************************************************************************************************************************************************
2024-08-19 03:47:34,786 p=12158 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": ""
}
2024-08-19 03:47:34,790 p=12158 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Check if Hyper-Threading is enabled] **************************************************************************************************************************************************
2024-08-19 03:47:36,226 p=12158 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 03:47:36,232 p=12158 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display Hyper-Threading information] **************************************************************************************************************************************************
2024-08-19 03:47:36,247 p=12158 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Hyper-Threading is not enabled or information not found."
}
2024-08-19 03:47:36,260 p=12158 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:47:36,260 p=12158 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=3    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2024-08-19 03:47:49,370 p=12203 u=aleksandr.pintaev n=ansible | PLAY [Execute display role] **********************************************************************************************************************************************************************************
2024-08-19 03:47:49,376 p=12203 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:47:51,998 p=12203 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:47:51,999 p=12203 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:47:52,010 p=12203 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display list of CPUs] *****************************************************************************************************************************************************************
2024-08-19 03:47:53,515 p=12203 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 03:47:53,522 p=12203 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Show list of CPUs] ********************************************************************************************************************************************************************
2024-08-19 03:47:53,536 p=12203 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Architecture:                         x86_64\nCPU op-mode(s):                       32-bit, 64-bit\nAddress sizes:                        46 bits physical, 48 bits virtual\nByte Order:                           Little Endian\nCPU(s):                               1\nOn-line CPU(s) list:                  0\nVendor ID:                            GenuineIntel\nBIOS Vendor ID:                       Intel\nModel name:                           Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz\nBIOS Model name:                        CPU @ 2.4GHz\nBIOS CPU family:                      1\nCPU family:                           6\nModel:                                63\nThread(s) per core:                   1\nCore(s) per socket:                   1\nSocket(s):                            1\nStepping:                             2\nBogoMIPS:                             4800.04\nFlags:                                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt\nHypervisor vendor:                    Xen\nVirtualization type:                  full\nL1d cache:                            32 KiB (1 instance)\nL1i cache:                            32 KiB (1 instance)\nL2 cache:                             256 KiB (1 instance)\nL3 cache:                             30 MiB (1 instance)\nNUMA node(s):                         1\nNUMA node0 CPU(s):                    0\nVulnerability Gather data sampling:   Not affected\nVulnerability Itlb multihit:          KVM: Mitigation: VMX unsupported\nVulnerability L1tf:                   Mitigation; PTE Inversion\nVulnerability Mds:                    Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Meltdown:               Mitigation; PTI\nVulnerability Mmio stale data:        Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Reg file data sampling: Not affected\nVulnerability Retbleed:               Not affected\nVulnerability Spec rstack overflow:   Not affected\nVulnerability Spec store bypass:      Vulnerable\nVulnerability Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization\nVulnerability Spectre v2:             Mitigation; Retpolines; STIBP disabled; RSB filling; PBRSB-eIBRS Not affected; BHI Retpoline\nVulnerability Srbds:                  Not affected\nVulnerability Tsx async abort:        Not affected"
}
2024-08-19 03:47:53,540 p=12203 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Check if Hyper-Threading is enabled] **************************************************************************************************************************************************
2024-08-19 03:47:55,060 p=12203 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:47:55,067 p=12203 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display Hyper-Threading information] **************************************************************************************************************************************************
2024-08-19 03:47:55,084 p=12203 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "flags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt"
}
2024-08-19 03:47:55,098 p=12203 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:47:55,098 p=12203 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-19 03:48:09,960 p=12255 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 03:48:09,964 p=12255 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:48:12,589 p=12255 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:48:12,590 p=12255 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:48:12,601 p=12255 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states can be modified] ***************************************************************************************************************************************************
2024-08-19 03:48:14,132 p=12255 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:48:14,139 p=12255 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states if possible] ********************************************************************************************************************************************************
2024-08-19 03:48:15,646 p=12255 u=aleksandr.pintaev n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 18] Invalid cross-device link: b'/home/ubuntu/.ansible/tmp/ansible-tmp-1724028494.2728078-12276-56368625337159/tmpwuuauyqe' -> b'/sys/devices/system/cpu/cpu0/cpuidle/state0/disable'
2024-08-19 03:48:15,647 p=12255 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "The destination directory (/sys/devices/system/cpu/cpu0/cpuidle/state0) is not writable by the current user. Error was: [Errno 13] Permission denied: b'/sys/devices/system/cpu/cpu0/cpuidle/state0/.ansible_tmp31s0iwaodisable'"}
2024-08-19 03:48:15,648 p=12255 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:48:15,649 p=12255 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 03:49:53,974 p=12295 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 03:49:53,979 p=12295 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 03:49:57,843 p=12295 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 03:49:57,844 p=12295 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:49:57,855 p=12295 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Check if C-states can be modified] ***************************************************************************************************************************************************
2024-08-19 03:49:59,464 p=12295 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 03:49:59,471 p=12295 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Disable C-states if possible] ********************************************************************************************************************************************************
2024-08-19 03:50:00,987 p=12295 u=aleksandr.pintaev n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: OSError: [Errno 18] Invalid cross-device link: b'/home/ubuntu/.ansible/tmp/ansible-tmp-1724028599.605325-12318-208880117030921/tmpjpzoihm0' -> b'/sys/devices/system/cpu/cpu0/cpuidle/state0/disable'
2024-08-19 03:50:00,988 p=12295 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "The destination directory (/sys/devices/system/cpu/cpu0/cpuidle/state0) is not writable by the current user. Error was: [Errno 13] Permission denied: b'/sys/devices/system/cpu/cpu0/cpuidle/state0/.ansible_tmp3xco4h7tdisable'"}
2024-08-19 03:50:00,990 p=12295 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 03:50:00,990 p=12295 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:21:08,433 p=12553 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 04:21:08,437 p=12553 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:21:12,404 p=12553 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:21:12,404 p=12553 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:21:12,415 p=12553 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 04:21:13,918 p=12553 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:21:13,933 p=12553 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : copy script c-states] ****************************************************************************************************************************************************************
2024-08-19 04:21:14,331 p=12553 u=aleksandr.pintaev n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2024-08-19 04:21:14,331 p=12553 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Could not find or access 'set_cpuidle_disable.sh'\nSearched in:\n\t/Users/aleksandr.pintaev/projects/ansible/roles/disable_c_state/files/set_cpuidle_disable.sh\n\t/Users/aleksandr.pintaev/projects/ansible/roles/disable_c_state/set_cpuidle_disable.sh\n\t/Users/aleksandr.pintaev/projects/ansible/roles/disable_c_state/tasks/files/set_cpuidle_disable.sh\n\t/Users/aleksandr.pintaev/projects/ansible/roles/disable_c_state/tasks/set_cpuidle_disable.sh\n\t/Users/aleksandr.pintaev/projects/ansible/playbooks/files/set_cpuidle_disable.sh\n\t/Users/aleksandr.pintaev/projects/ansible/playbooks/set_cpuidle_disable.sh on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2024-08-19 04:21:14,332 p=12553 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:21:14,332 p=12553 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:22:44,785 p=12687 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 04:22:44,790 p=12687 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:22:48,655 p=12687 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:22:48,655 p=12687 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:22:48,666 p=12687 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 04:22:50,203 p=12687 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:22:50,216 p=12687 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : copy script c-states] ****************************************************************************************************************************************************************
2024-08-19 04:22:51,796 p=12687 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:22:51,806 p=12687 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : execute c-states] ********************************************************************************************************************************************************************
2024-08-19 04:22:53,386 p=12687 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:22:53,410 p=12687 u=aleksandr.pintaev n=ansible | RUNNING HANDLER [disable_c_state : Update GRUB] **************************************************************************************************************************************************************
2024-08-19 04:22:54,905 p=12687 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:22:54,921 p=12687 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:22:54,921 p=12687 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=3    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2024-08-19 04:23:00,526 p=12757 u=aleksandr.pintaev n=ansible | PLAY [Execute c-state role] **********************************************************************************************************************************************************************************
2024-08-19 04:23:00,530 p=12757 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:23:03,191 p=12757 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:23:03,192 p=12757 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:23:03,204 p=12757 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 04:23:05,021 p=12757 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:23:05,029 p=12757 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : copy script c-states] ****************************************************************************************************************************************************************
2024-08-19 04:23:08,402 p=12757 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:23:08,411 p=12757 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : execute c-states] ********************************************************************************************************************************************************************
2024-08-19 04:23:09,916 p=12757 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:23:09,934 p=12757 u=aleksandr.pintaev n=ansible | RUNNING HANDLER [disable_c_state : Update GRUB] **************************************************************************************************************************************************************
2024-08-19 04:23:12,810 p=12757 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:23:12,820 p=12757 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:23:12,821 p=12757 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-19 04:25:17,651 p=12817 u=aleksandr.pintaev n=ansible | PLAY [Execute display role] **********************************************************************************************************************************************************************************
2024-08-19 04:25:17,657 p=12817 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:25:21,541 p=12817 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:25:21,541 p=12817 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:25:21,554 p=12817 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display list of CPUs] *****************************************************************************************************************************************************************
2024-08-19 04:25:23,073 p=12817 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:25:23,080 p=12817 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Show list of CPUs] ********************************************************************************************************************************************************************
2024-08-19 04:25:23,093 p=12817 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Architecture:                         x86_64\nCPU op-mode(s):                       32-bit, 64-bit\nAddress sizes:                        46 bits physical, 48 bits virtual\nByte Order:                           Little Endian\nCPU(s):                               1\nOn-line CPU(s) list:                  0\nVendor ID:                            GenuineIntel\nBIOS Vendor ID:                       Intel\nModel name:                           Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz\nBIOS Model name:                        CPU @ 2.4GHz\nBIOS CPU family:                      1\nCPU family:                           6\nModel:                                63\nThread(s) per core:                   1\nCore(s) per socket:                   1\nSocket(s):                            1\nStepping:                             2\nBogoMIPS:                             4800.04\nFlags:                                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt\nHypervisor vendor:                    Xen\nVirtualization type:                  full\nL1d cache:                            32 KiB (1 instance)\nL1i cache:                            32 KiB (1 instance)\nL2 cache:                             256 KiB (1 instance)\nL3 cache:                             30 MiB (1 instance)\nNUMA node(s):                         1\nNUMA node0 CPU(s):                    0\nVulnerability Gather data sampling:   Not affected\nVulnerability Itlb multihit:          KVM: Mitigation: VMX unsupported\nVulnerability L1tf:                   Mitigation; PTE Inversion\nVulnerability Mds:                    Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Meltdown:               Mitigation; PTI\nVulnerability Mmio stale data:        Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Reg file data sampling: Not affected\nVulnerability Retbleed:               Not affected\nVulnerability Spec rstack overflow:   Not affected\nVulnerability Spec store bypass:      Vulnerable\nVulnerability Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization\nVulnerability Spectre v2:             Mitigation; Retpolines; STIBP disabled; RSB filling; PBRSB-eIBRS Not affected; BHI Retpoline\nVulnerability Srbds:                  Not affected\nVulnerability Tsx async abort:        Not affected"
}
2024-08-19 04:25:23,097 p=12817 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Check if Hyper-Threading is enabled] **************************************************************************************************************************************************
2024-08-19 04:25:24,544 p=12817 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:25:24,552 p=12817 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display Hyper-Threading information] **************************************************************************************************************************************************
2024-08-19 04:25:24,568 p=12817 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "flags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt"
}
2024-08-19 04:25:24,582 p=12817 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:25:24,582 p=12817 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-19 04:26:41,378 p=12891 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:26:41,383 p=12891 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:26:45,404 p=12891 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:26:45,405 p=12891 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:26:45,416 p=12891 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:26:47,208 p=12891 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:26:47,218 p=12891 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:26:47,304 p=12891 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'None' has no attribute 'blockdevices'\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Find root partition\n  ^ here\n"}
2024-08-19 04:26:47,305 p=12891 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:26:47,305 p=12891 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 04:28:19,120 p=12932 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:28:19,126 p=12932 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:28:22,914 p=12932 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:28:22,915 p=12932 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:28:22,930 p=12932 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:28:24,467 p=12932 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:28:24,479 p=12932 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:28:24,517 p=12932 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'None' has no attribute 'blockdevices'\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Find root partition\n  ^ here\n"}
2024-08-19 04:28:24,517 p=12932 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:28:24,517 p=12932 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 04:31:04,845 p=12967 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:31:04,851 p=12967 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:31:08,799 p=12967 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:31:08,800 p=12967 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:31:08,811 p=12967 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:31:10,299 p=12967 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:31:10,308 p=12967 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:31:10,338 p=12967 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "the field 'args' has an invalid value ({'lsblk_data': '{{ lsblk_output.stdout | from_json }}'}), and could not be converted to dict. The error was: Expecting value: line 1 column 1 (char 0)\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Parse lsblk output\n  ^ here\n"}
2024-08-19 04:31:10,339 p=12967 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:31:10,339 p=12967 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 04:31:54,509 p=12997 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:31:54,515 p=12997 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:31:57,305 p=12997 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:31:57,305 p=12997 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:31:57,317 p=12997 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:31:58,965 p=12997 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 04:31:58,973 p=12997 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:31:58,999 p=12997 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "the field 'args' has an invalid value ({'lsblk_data': '{{ lsblk_output.stdout | from_json }}'}), and could not be converted to dict. The error was: Expecting value: line 1 column 1 (char 0)\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Parse lsblk output\n  ^ here\n"}
2024-08-19 04:31:59,000 p=12997 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:31:59,000 p=12997 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 04:33:20,658 p=13030 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:33:20,663 p=13030 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:33:24,550 p=13030 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:33:24,551 p=13030 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:33:24,562 p=13030 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:33:26,058 p=13030 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:33:26,066 p=13030 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:33:26,101 p=13030 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'mountpoint'\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 8, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Find root partition\n  ^ here\n"}
2024-08-19 04:33:26,101 p=13030 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:33:26,101 p=13030 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:36:20,234 p=13061 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:36:20,239 p=13061 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:36:24,037 p=13061 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:36:24,037 p=13061 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:36:24,048 p=13061 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:36:25,565 p=13061 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:36:25,572 p=13061 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:36:25,588 p=13061 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:36:25,592 p=13061 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:36:25,613 p=13061 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:36:25,616 p=13061 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:36:25,625 p=13061 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:36:25,627 p=13061 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:36:25,643 p=13061 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'mountpoint'\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 20, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Find root partition\n  ^ here\n"}
2024-08-19 04:36:25,643 p=13061 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:36:25,643 p=13061 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:37:35,587 p=13093 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:37:35,592 p=13093 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:37:39,652 p=13093 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:37:39,652 p=13093 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:37:39,665 p=13093 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:37:41,163 p=13093 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:37:41,170 p=13093 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:37:41,197 p=13093 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:37:41,201 p=13093 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:37:41,211 p=13093 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:37:41,213 p=13093 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:37:41,230 p=13093 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'mountpoint'\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 16, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Find root partition\n  ^ here\n"}
2024-08-19 04:37:41,231 p=13093 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:37:41,231 p=13093 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:38:25,902 p=13124 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:38:25,907 p=13124 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:38:28,496 p=13124 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:38:28,496 p=13124 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:38:28,507 p=13124 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:38:30,050 p=13124 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:38:30,060 p=13124 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:38:30,091 p=13124 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:38:30,095 p=13124 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:38:30,106 p=13124 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:38:30,108 p=13124 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:38:30,116 p=13124 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "template error while templating string: unexpected char '#' at 74. String: {{\n  (lsblk_data['blockdevices'] |\n  selectattr('children', 'defined') |  # Only consider devices with children\n  map(attribute='children') |\n  flatten() |\n  selectattr('mountpoints', 'defined') |  # Ensure mountpoints are defined\n  selectattr('mountpoints', 'search', '/') |  # Match mountpoint as '/'\n  first | default({}) | dict2items |\n  selectattr('key', 'equalto', 'name') | map(attribute='value') | first)\n}}. unexpected char '#' at 74"}
2024-08-19 04:38:30,116 p=13124 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:38:30,116 p=13124 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:39:41,313 p=13157 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 71, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  debug:
    msg: "Root partition index:
^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2024-08-19 04:39:52,064 p=13168 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 71, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  debug:
    msg: "Root partition index:
^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2024-08-19 04:40:02,960 p=13173 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 71, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  debug:
    msg: "Root partition index:
^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2024-08-19 04:40:12,279 p=13177 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unexpected end of stream

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 71, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  debug:
    msg: "Root partition index:
^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2024-08-19 04:40:53,701 p=13184 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:40:53,707 p=13184 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:40:57,643 p=13184 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:40:57,644 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:40:57,656 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:40:59,405 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:40:59,413 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:40:59,441 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:40:59,445 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:40:59,455 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:40:59,457 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:40:59,476 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:40:59,478 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root partition] *********************************************************************************************************************************************************
2024-08-19 04:40:59,485 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root partition: xvda1"
}
2024-08-19 04:40:59,487 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Determine disk with the root partition] ***************************************************************************************************************************************
2024-08-19 04:40:59,503 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:40:59,505 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root disk] **************************************************************************************************************************************************************
2024-08-19 04:40:59,511 p=13184 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root disk: xvda"
}
2024-08-19 04:40:59,513 p=13184 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find partitions on the root disk] *********************************************************************************************************************************************
2024-08-19 04:40:59,518 p=13184 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "template error while templating string: unexpected '}', expected ')'. String: {{\n  (lsblk_data['blockdevices'] |\n  selectattr('name', 'match', root_disk + '[0-9]+') |\n  map(attribute='name') | list\n}}. unexpected '}', expected ')'"}
2024-08-19 04:40:59,519 p=13184 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:40:59,519 p=13184 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:41:57,665 p=13301 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:41:57,672 p=13301 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:42:00,399 p=13301 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:42:00,399 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:00,411 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:42:01,917 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:01,926 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:42:01,958 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:01,961 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:42:01,971 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:42:01,974 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:42:01,993 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:01,995 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root partition] *********************************************************************************************************************************************************
2024-08-19 04:42:02,002 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root partition: xvda1"
}
2024-08-19 04:42:02,004 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Determine disk with the root partition] ***************************************************************************************************************************************
2024-08-19 04:42:02,019 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:02,021 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root disk] **************************************************************************************************************************************************************
2024-08-19 04:42:02,028 p=13301 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root disk: xvda"
}
2024-08-19 04:42:02,030 p=13301 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find partitions on the root disk] *********************************************************************************************************************************************
2024-08-19 04:42:02,036 p=13301 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "template error while templating string: unexpected '}', expected ')'. String: {{\n  (lsblk_data['blockdevices'] |\n  selectattr('name', 'search', root_disk + '[0-9]+') |\n  map(attribute='name') | list\n}}. unexpected '}', expected ')'"}
2024-08-19 04:42:02,036 p=13301 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:42:02,036 p=13301 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:42:50,797 p=13332 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:42:50,803 p=13332 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:42:53,397 p=13332 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:42:53,398 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:53,410 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:42:54,931 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:54,941 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:42:54,973 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:54,976 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:42:54,987 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:42:54,990 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:42:55,009 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:55,011 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root partition] *********************************************************************************************************************************************************
2024-08-19 04:42:55,019 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root partition: xvda1"
}
2024-08-19 04:42:55,021 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Determine disk with the root partition] ***************************************************************************************************************************************
2024-08-19 04:42:55,037 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:42:55,039 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root disk] **************************************************************************************************************************************************************
2024-08-19 04:42:55,045 p=13332 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root disk: xvda"
}
2024-08-19 04:42:55,047 p=13332 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find partitions on the root disk] *********************************************************************************************************************************************
2024-08-19 04:42:55,053 p=13332 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "template error while templating string: unexpected '}', expected ')'. String: {{\n  (lsblk_data['blockdevices'] |\n  selectattr('name', 'match', root_disk + '[0-9]+') |\n  map(attribute='name') | list\n}}. unexpected '}', expected ')'"}
2024-08-19 04:42:55,053 p=13332 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:42:55,053 p=13332 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:44:02,734 p=13364 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:44:02,743 p=13364 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:44:06,667 p=13364 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:44:06,668 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:44:06,680 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:44:08,176 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:44:08,188 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:44:08,218 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:44:08,222 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug parsed lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:44:08,233 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": {
        "blockdevices": [
            {
                "maj:min": "7:0",
                "mountpoints": [
                    "/snap/amazon-ssm-agent/7993"
                ],
                "name": "loop0",
                "rm": false,
                "ro": true,
                "size": "25.2M",
                "type": "loop"
            },
            {
                "maj:min": "7:1",
                "mountpoints": [
                    "/snap/core18/2829"
                ],
                "name": "loop1",
                "rm": false,
                "ro": true,
                "size": "55.7M",
                "type": "loop"
            },
            {
                "maj:min": "7:2",
                "mountpoints": [
                    "/snap/snapd/21759"
                ],
                "name": "loop2",
                "rm": false,
                "ro": true,
                "size": "38.8M",
                "type": "loop"
            },
            {
                "children": [
                    {
                        "maj:min": "202:1",
                        "mountpoints": [
                            "/"
                        ],
                        "name": "xvda1",
                        "rm": false,
                        "ro": false,
                        "size": "7G",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:14",
                        "mountpoints": [
                            null
                        ],
                        "name": "xvda14",
                        "rm": false,
                        "ro": false,
                        "size": "4M",
                        "type": "part"
                    },
                    {
                        "maj:min": "202:15",
                        "mountpoints": [
                            "/boot/efi"
                        ],
                        "name": "xvda15",
                        "rm": false,
                        "ro": false,
                        "size": "106M",
                        "type": "part"
                    },
                    {
                        "maj:min": "259:0",
                        "mountpoints": [
                            "/boot"
                        ],
                        "name": "xvda16",
                        "rm": false,
                        "ro": false,
                        "size": "913M",
                        "type": "part"
                    }
                ],
                "maj:min": "202:0",
                "mountpoints": [
                    null
                ],
                "name": "xvda",
                "rm": false,
                "ro": false,
                "size": "8G",
                "type": "disk"
            },
            {
                "maj:min": "202:16",
                "mountpoints": [
                    null
                ],
                "name": "xvdb",
                "rm": false,
                "ro": false,
                "size": "5G",
                "type": "disk"
            }
        ]
    }
}
2024-08-19 04:44:08,235 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:44:08,254 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:44:08,257 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root partition] *********************************************************************************************************************************************************
2024-08-19 04:44:08,263 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root partition: xvda1"
}
2024-08-19 04:44:08,265 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Determine disk with the root partition] ***************************************************************************************************************************************
2024-08-19 04:44:08,280 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:44:08,283 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Debug root disk] **************************************************************************************************************************************************************
2024-08-19 04:44:08,289 p=13364 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Root disk: xvda"
}
2024-08-19 04:44:08,291 p=13364 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find partitions on the root disk] *********************************************************************************************************************************************
2024-08-19 04:44:08,297 p=13364 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "template error while templating string: unexpected '}', expected ')'. String: {{\n  (lsblk_data['blockdevices'] |\n  selectattr('name', 'match', root_disk + '[0-9]+') |\n  map(attribute='name') | list\n}}. unexpected '}', expected ')'"}
2024-08-19 04:44:08,297 p=13364 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:44:08,297 p=13364 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:48:23,087 p=13554 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:48:23,093 p=13554 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:48:26,855 p=13554 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:48:26,855 p=13554 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:48:26,867 p=13554 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:48:28,360 p=13554 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:48:28,370 p=13554 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Parse lsblk output] ***********************************************************************************************************************************************************
2024-08-19 04:48:28,386 p=13554 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:48:28,389 p=13554 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:48:29,829 p=13554 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "cmd": ["bash", "files/find_root_partition.sh", "{'blockdevices': [{'name': 'loop0', 'maj:min': '7:0', 'rm': False, 'size': '25.2M', 'ro': True, 'type': 'loop', 'mountpoints': ['/snap/amazon-ssm-agent/7993']}, {'name': 'loop1', 'maj:min': '7:1', 'rm': False, 'size': '55.7M', 'ro': True, 'type': 'loop', 'mountpoints': ['/snap/core18/2829']}, {'name': 'loop2', 'maj:min': '7:2', 'rm': False, 'size': '38.8M', 'ro': True, 'type': 'loop', 'mountpoints': ['/snap/snapd/21759']}, {'name': 'xvda', 'maj:min': '202:0', 'rm': False, 'size': '8G', 'ro': False, 'type': 'disk', 'mountpoints': [None], 'children': [{'name': 'xvda1', 'maj:min': '202:1', 'rm': False, 'size': '7G', 'ro': False, 'type': 'part', 'mountpoints': ['/']}, {'name': 'xvda14', 'maj:min': '202:14', 'rm': False, 'size': '4M', 'ro': False, 'type': 'part', 'mountpoints': [None]}, {'name': 'xvda15', 'maj:min': '202:15', 'rm': False, 'size': '106M', 'ro': False, 'type': 'part', 'mountpoints': ['/boot/efi']}, {'name': 'xvda16', 'maj:min': '259:0', 'rm': False, 'size': '913M', 'ro': False, 'type': 'part', 'mountpoints': ['/boot']}]}, {'name': 'xvdb', 'maj:min': '202:16', 'rm': False, 'size': '5G', 'ro': False, 'type': 'disk', 'mountpoints': [None]}]}"], "delta": "0:00:00.004611", "end": "2024-08-19 01:48:31.949891", "msg": "non-zero return code", "rc": 127, "start": "2024-08-19 01:48:31.945280", "stderr": "bash: files/find_root_partition.sh: No such file or directory", "stderr_lines": ["bash: files/find_root_partition.sh: No such file or directory"], "stdout": "", "stdout_lines": []}
2024-08-19 04:48:29,831 p=13554 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 04:48:29,831 p=13554 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 04:53:15,548 p=13701 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 04:53:15,554 p=13701 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 04:53:19,601 p=13701 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 04:53:19,601 p=13701 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:53:19,613 p=13701 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Get information about partitions] *********************************************************************************************************************************************
2024-08-19 04:53:21,115 p=13701 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:53:21,124 p=13701 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Set fact for lsblk data] ******************************************************************************************************************************************************
2024-08-19 04:53:21,153 p=13701 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 04:53:21,157 p=13701 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Copy find_root_partition.sh to remote host] ***********************************************************************************************************************************
2024-08-19 04:53:24,440 p=13701 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 04:53:24,447 p=13701 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Find root partition] **********************************************************************************************************************************************************
2024-08-19 04:57:05,178 p=13701 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 05:01:11,475 p=13783 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:01:11,480 p=13783 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:01:15,381 p=13783 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:01:15,382 p=13783 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:01:15,392 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:01:21,356 p=13783 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:01:21,365 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:01:22,875 p=13783 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:01:22,882 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:01:22,911 p=13783 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:01:22,914 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:01:22,931 p=13783 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:01:22,933 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:01:22,947 p=13783 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:01:22,949 p=13783 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:01:22,962 p=13783 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: No first item, sequence was empty.\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 26, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Найти первый незанятый соседний раздел\n  ^ here\n"}
2024-08-19 05:01:22,962 p=13783 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:01:22,962 p=13783 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=6    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 05:02:46,616 p=13825 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  but found another document

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 5, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# encrypt_partition/tasks/main.yml
---
^ here

2024-08-19 05:03:04,405 p=13831 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:03:04,415 p=13831 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:03:08,478 p=13831 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:03:08,478 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:08,488 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:03:12,138 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:12,147 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:03:13,778 p=13831 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:03:13,786 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:03:13,818 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:13,821 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:03:13,837 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:13,840 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:03:13,854 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:13,856 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:03:13,870 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:13,872 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:03:15,387 p=13831 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:03:15,394 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:03:15,421 p=13831 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:03:15,424 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:03:16,912 p=13831 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:03:16,920 p=13831 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:03:18,385 p=13831 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-19 05:03:18,387 p=13831 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:03:18,387 p=13831 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 05:05:18,541 p=13898 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 30, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: проверка доступного раздела
               ^ here

2024-08-19 05:05:35,753 p=13904 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 59, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: вывод команды cryptsetup
               ^ here

2024-08-19 05:05:43,894 p=13908 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 59, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: вывод команды cryptsetup
               ^ here

2024-08-19 05:06:20,840 p=13912 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 30, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: проверка доступного раздела
               ^ here

2024-08-19 05:06:59,848 p=13917 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:06:59,854 p=13917 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:07:03,676 p=13917 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:07:03,676 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:03,687 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:07:06,994 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:07,004 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:07:08,501 p=13917 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:07:08,512 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:07:08,544 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:08,547 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:07:08,565 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:08,568 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:07:08,583 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:08,585 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:07:08,599 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:08,603 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка проверка доступного раздела] ******************************************************************************************************************************************
2024-08-19 05:07:08,609 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Available partition: "
}
2024-08-19 05:07:08,611 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:07:10,108 p=13917 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:07:10,116 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:07:10,144 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:07:10,147 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:07:11,842 p=13917 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:07:11,849 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:07:13,342 p=13917 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:07:13,351 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка вывод команды cryptsetup] *********************************************************************************************************************************************
2024-08-19 05:07:13,366 p=13917 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_result": {
        "changed": true,
        "cmd": [
            "echo",
            "password",
            "|",
            "cryptsetup",
            "luksFormat",
            "\n",
            "--batch-mode",
            "--key-file",
            "-"
        ],
        "delta": "0:00:00.003891",
        "end": "2024-08-19 02:07:15.518272",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-19 02:07:15.514381",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "password | cryptsetup luksFormat \n --batch-mode --key-file -",
        "stdout_lines": [
            "password | cryptsetup luksFormat ",
            " --batch-mode --key-file -"
        ]
    }
}
2024-08-19 05:07:13,369 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открыть зашифрованный раздел] *************************************************************************************************************************************************
2024-08-19 05:07:14,795 p=13917 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:07:14,803 p=13917 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Форматирование открытого зашифрованного раздела] ******************************************************************************************************************************
2024-08-19 05:07:14,818 p=13917 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'filesystem_type' is undefined\n\nThe error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 69, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Форматирование открытого зашифрованного раздела\n  ^ here\n"}
2024-08-19 05:07:14,819 p=13917 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:07:14,819 p=13917 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=14   changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 05:08:27,286 p=14002 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:08:27,291 p=14002 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:08:31,234 p=14002 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:08:31,234 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:31,245 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:08:34,892 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:34,900 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:08:36,491 p=14002 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:08:36,499 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:08:36,532 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:36,535 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:08:36,552 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:36,554 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:08:36,568 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:36,571 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:08:36,585 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:36,587 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка проверка доступного раздела] ******************************************************************************************************************************************
2024-08-19 05:08:36,594 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Available partition: "
}
2024-08-19 05:08:36,596 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:08:38,025 p=14002 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:08:38,031 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:08:38,059 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:08:38,062 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:08:39,500 p=14002 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:08:39,508 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:08:40,966 p=14002 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:08:40,977 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка вывод команды cryptsetup] *********************************************************************************************************************************************
2024-08-19 05:08:40,993 p=14002 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_result": {
        "changed": true,
        "cmd": [
            "echo",
            "password",
            "|",
            "cryptsetup",
            "luksFormat",
            "\n",
            "--batch-mode",
            "--key-file",
            "-"
        ],
        "delta": "0:00:00.003648",
        "end": "2024-08-19 02:08:43.144551",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-19 02:08:43.140903",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "password | cryptsetup luksFormat \n --batch-mode --key-file -",
        "stdout_lines": [
            "password | cryptsetup luksFormat ",
            " --batch-mode --key-file -"
        ]
    }
}
2024-08-19 05:08:40,997 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открыть зашифрованный раздел] *************************************************************************************************************************************************
2024-08-19 05:08:42,451 p=14002 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:08:42,459 p=14002 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Форматирование открытого зашифрованного раздела] ******************************************************************************************************************************
2024-08-19 05:08:43,916 p=14002 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": true, "cmd": ["mkfs.ext4", "/dev/mapper/encrypted_partition"], "delta": "0:00:00.008543", "end": "2024-08-19 02:08:46.098928", "msg": "non-zero return code", "rc": 1, "start": "2024-08-19 02:08:46.090385", "stderr": "mke2fs 1.47.0 (5-Feb-2023)\nThe file /dev/mapper/encrypted_partition does not exist and no size was specified.", "stderr_lines": ["mke2fs 1.47.0 (5-Feb-2023)", "The file /dev/mapper/encrypted_partition does not exist and no size was specified."], "stdout": "", "stdout_lines": []}
2024-08-19 05:08:43,917 p=14002 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:08:43,917 p=14002 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=14   changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 05:12:15,392 p=14088 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 30, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: проверка доступного раздела
               ^ here

2024-08-19 05:12:27,218 p=14095 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_near_root_part/tasks/main.yml': line 30, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: проверка доступного раздела
               ^ here

2024-08-19 05:12:39,615 p=14100 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:12:39,621 p=14100 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:12:43,491 p=14100 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:12:43,492 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:43,502 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:12:46,836 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:46,844 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:12:48,384 p=14100 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:12:48,393 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:12:48,426 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:48,429 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:12:48,446 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:48,449 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:12:48,463 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:48,465 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:12:48,480 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:48,484 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка проверка доступного раздела] ******************************************************************************************************************************************
2024-08-19 05:12:48,490 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Available partition: "
}
2024-08-19 05:12:48,492 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:12:49,937 p=14100 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:12:49,947 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:12:49,978 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:12:49,982 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:12:51,421 p=14100 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:12:51,429 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:12:52,933 p=14100 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:12:52,943 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка вывод команды cryptsetup] *********************************************************************************************************************************************
2024-08-19 05:12:52,962 p=14100 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_result": {
        "changed": true,
        "cmd": [
            "echo",
            "password",
            "|",
            "cryptsetup",
            "luksFormat",
            "\n",
            "--batch-mode",
            "--key-file",
            "-"
        ],
        "delta": "0:00:00.004025",
        "end": "2024-08-19 02:12:55.099869",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-19 02:12:55.095844",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "password | cryptsetup luksFormat \n --batch-mode --key-file -",
        "stdout_lines": [
            "password | cryptsetup luksFormat ",
            " --batch-mode --key-file -"
        ]
    }
}
2024-08-19 05:12:52,966 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открыть зашифрованный раздел] *************************************************************************************************************************************************
2024-08-19 05:12:54,397 p=14100 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:12:54,405 p=14100 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить существование зашифрованного устройства] ****************************************************************************************************************************
2024-08-19 05:13:28,154 p=14100 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"attempts": 5, "changed": true, "cmd": ["ls", "/dev/mapper/encrypted_partition"], "delta": "0:00:00.004487", "end": "2024-08-19 02:13:30.348306", "msg": "non-zero return code", "rc": 2, "start": "2024-08-19 02:13:30.343819", "stderr": "ls: cannot access '/dev/mapper/encrypted_partition': No such file or directory", "stderr_lines": ["ls: cannot access '/dev/mapper/encrypted_partition': No such file or directory"], "stdout": "", "stdout_lines": []}
2024-08-19 05:13:28,156 p=14100 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:13:28,157 p=14100 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=14   changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 05:15:08,796 p=14218 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:15:08,802 p=14218 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:15:12,642 p=14218 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:15:12,642 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:12,652 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:15:15,999 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:16,008 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:15:17,530 p=14218 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:15:17,540 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:15:17,573 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:17,577 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:15:17,593 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:17,596 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:15:17,610 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:17,612 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:15:17,626 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:17,629 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка проверка доступного раздела] ******************************************************************************************************************************************
2024-08-19 05:15:17,636 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Available partition: "
}
2024-08-19 05:15:17,638 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:15:19,098 p=14218 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:15:19,105 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:15:19,133 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:15:19,136 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:15:20,580 p=14218 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:15:20,587 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:15:22,036 p=14218 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:15:22,046 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка вывод команды cryptsetup] *********************************************************************************************************************************************
2024-08-19 05:15:22,062 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_result": {
        "changed": true,
        "cmd": [
            "echo",
            "password",
            "|",
            "cryptsetup",
            "luksFormat",
            "\n",
            "--batch-mode",
            "--key-file",
            "-"
        ],
        "delta": "0:00:00.003955",
        "end": "2024-08-19 02:15:24.239466",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-19 02:15:24.235511",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "password | cryptsetup luksFormat \n --batch-mode --key-file -",
        "stdout_lines": [
            "password | cryptsetup luksFormat ",
            " --batch-mode --key-file -"
        ]
    }
}
2024-08-19 05:15:22,066 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открыть зашифрованный раздел] *************************************************************************************************************************************************
2024-08-19 05:15:23,559 p=14218 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:15:23,567 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить статус зашифрованного устройства] ***********************************************************************************************************************************
2024-08-19 05:15:25,014 p=14218 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": true, "cmd": ["cryptsetup", "status", "encrypted_partition"], "delta": "0:00:00.007599", "end": "2024-08-19 02:15:27.219651", "msg": "non-zero return code", "rc": 4, "start": "2024-08-19 02:15:27.212052", "stderr": "", "stderr_lines": [], "stdout": "/dev/mapper/encrypted_partition is inactive.", "stdout_lines": ["/dev/mapper/encrypted_partition is inactive."]}
2024-08-19 05:15:25,014 p=14218 u=aleksandr.pintaev n=ansible | ...ignoring
2024-08-19 05:15:25,019 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Показать статус зашифрованного устройства] ************************************************************************************************************************************
2024-08-19 05:15:25,034 p=14218 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_status": {
        "changed": true,
        "cmd": [
            "cryptsetup",
            "status",
            "encrypted_partition"
        ],
        "delta": "0:00:00.007599",
        "end": "2024-08-19 02:15:27.219651",
        "failed": true,
        "msg": "non-zero return code",
        "rc": 4,
        "start": "2024-08-19 02:15:27.212052",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "/dev/mapper/encrypted_partition is inactive.",
        "stdout_lines": [
            "/dev/mapper/encrypted_partition is inactive."
        ]
    }
}
2024-08-19 05:15:25,038 p=14218 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить существование зашифрованного устройства] ****************************************************************************************************************************
2024-08-19 05:15:58,724 p=14218 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"attempts": 5, "changed": true, "cmd": ["ls", "/dev/mapper/encrypted_partition"], "delta": "0:00:00.004172", "end": "2024-08-19 02:16:00.927754", "msg": "non-zero return code", "rc": 2, "start": "2024-08-19 02:16:00.923582", "stderr": "ls: cannot access '/dev/mapper/encrypted_partition': No such file or directory", "stderr_lines": ["ls: cannot access '/dev/mapper/encrypted_partition': No such file or directory"], "stdout": "", "stdout_lines": []}
2024-08-19 05:15:58,727 p=14218 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:15:58,727 p=14218 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=16   changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2024-08-19 05:19:05,813 p=14390 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:19:05,818 p=14390 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:19:09,886 p=14390 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:19:09,886 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:09,897 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Установить cryptsetup] ********************************************************************************************************************************************************
2024-08-19 05:19:13,359 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:13,367 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Получить информацию о разделах] ***********************************************************************************************************************************************
2024-08-19 05:19:14,952 p=14390 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:14,960 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить корневой раздел] ***************************************************************************************************************************************************
2024-08-19 05:19:14,991 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:14,994 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определить все разделы на диске] **********************************************************************************************************************************************
2024-08-19 05:19:15,011 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:15,014 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти соседние разделы] *******************************************************************************************************************************************************
2024-08-19 05:19:15,028 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:15,030 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти первый незанятый соседний раздел] ***************************************************************************************************************************************
2024-08-19 05:19:15,044 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:15,047 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка проверка доступного раздела] ******************************************************************************************************************************************
2024-08-19 05:19:15,053 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Available partition: "
}
2024-08-19 05:19:15,056 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли первый незанятый раздел] ****************************************************************************************************************************
2024-08-19 05:19:16,535 p=14390 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:16,544 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Найти следующий незанятый раздел, если первый смонтирован] ********************************************************************************************************************
2024-08-19 05:19:16,573 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:16,577 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить, смонтирован ли доступный раздел] ***********************************************************************************************************************************
2024-08-19 05:19:18,056 p=14390 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:18,061 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование найденного соседнего раздела с помощью LUKS] ***********************************************************************************************************************
2024-08-19 05:19:19,581 p=14390 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:19,591 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отладка вывод команды cryptsetup] *********************************************************************************************************************************************
2024-08-19 05:19:19,607 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_result": {
        "changed": true,
        "cmd": [
            "echo",
            "password",
            "|",
            "cryptsetup",
            "luksFormat",
            "\n",
            "--batch-mode",
            "--key-file",
            "-"
        ],
        "delta": "0:00:00.003797",
        "end": "2024-08-19 02:19:21.793386",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-19 02:19:21.789589",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "password | cryptsetup luksFormat \n --batch-mode --key-file -",
        "stdout_lines": [
            "password | cryptsetup luksFormat ",
            " --batch-mode --key-file -"
        ]
    }
}
2024-08-19 05:19:19,611 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открыть зашифрованный раздел] *************************************************************************************************************************************************
2024-08-19 05:19:21,036 p=14390 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:21,044 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить статус зашифрованного устройства] ***********************************************************************************************************************************
2024-08-19 05:19:22,498 p=14390 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": true, "cmd": ["cryptsetup", "status", "encrypted_partition"], "delta": "0:00:00.005562", "end": "2024-08-19 02:19:24.715137", "msg": "non-zero return code", "rc": 4, "start": "2024-08-19 02:19:24.709575", "stderr": "", "stderr_lines": [], "stdout": "/dev/mapper/encrypted_partition is inactive.", "stdout_lines": ["/dev/mapper/encrypted_partition is inactive."]}
2024-08-19 05:19:22,499 p=14390 u=aleksandr.pintaev n=ansible | ...ignoring
2024-08-19 05:19:22,504 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Показать статус зашифрованного устройства] ************************************************************************************************************************************
2024-08-19 05:19:22,518 p=14390 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "cryptsetup_status": {
        "changed": true,
        "cmd": [
            "cryptsetup",
            "status",
            "encrypted_partition"
        ],
        "delta": "0:00:00.005562",
        "end": "2024-08-19 02:19:24.715137",
        "failed": true,
        "msg": "non-zero return code",
        "rc": 4,
        "start": "2024-08-19 02:19:24.709575",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "/dev/mapper/encrypted_partition is inactive.",
        "stdout_lines": [
            "/dev/mapper/encrypted_partition is inactive."
        ]
    }
}
2024-08-19 05:19:22,522 p=14390 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверить существование зашифрованного устройства] ****************************************************************************************************************************
2024-08-19 05:19:24,500 p=14390 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 05:19:44,904 p=14483 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:19:44,909 p=14483 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:19:47,604 p=14483 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:19:47,604 p=14483 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:47,614 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Install cryptsetup package] ******************************************************************************************************************************************************
2024-08-19 05:19:49,689 p=14483 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:49,696 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 05:19:51,226 p=14483 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:19:51,236 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 05:19:51,250 p=14483 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:19:51,256 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 05:19:52,746 p=14483 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:52,754 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 05:19:54,198 p=14483 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:19:54,205 p=14483 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create filesystem on the encrypted disk] *****************************************************************************************************************************************
2024-08-19 05:19:55,775 p=14483 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Device /dev/mapper/encrypted_disk not found."}
2024-08-19 05:19:55,777 p=14483 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:19:55,777 p=14483 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 05:29:07,064 p=14683 u=aleksandr.pintaev n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/aleksandr.pintaev/projects/ansible/roles/encrypt_second_disk/tasks/main.yml': line 40, column 16, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Отладка: показать информацию о зашифрованном устройстве
               ^ here

2024-08-19 05:29:20,658 p=14689 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:29:20,663 p=14689 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:29:25,089 p=14689 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:29:25,090 p=14689 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:29:25,100 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Install cryptsetup package] ******************************************************************************************************************************************************
2024-08-19 05:29:27,506 p=14689 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:29:27,514 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 05:29:29,227 p=14689 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:29:29,235 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 05:29:29,248 p=14689 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:29:29,253 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 05:29:30,981 p=14689 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:29:30,989 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 05:29:32,605 p=14689 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:29:32,614 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Проверить существование зашифрованного устройства] *******************************************************************************************************************************
2024-08-19 05:29:34,057 p=14689 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:29:34,066 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Отладка показать информацию о зашифрованном устройстве] **************************************************************************************************************************
2024-08-19 05:29:34,082 p=14689 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "encrypted_disk_check": {
        "changed": true,
        "cmd": [
            "ls",
            "-l",
            "/dev/mapper/encrypted_disk"
        ],
        "delta": "0:00:00.003955",
        "end": "2024-08-19 02:29:36.303758",
        "failed": false,
        "failed_when_result": false,
        "msg": "non-zero return code",
        "rc": 2,
        "start": "2024-08-19 02:29:36.299803",
        "stderr": "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory",
        "stderr_lines": [
            "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2024-08-19 05:29:34,086 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create filesystem on the encrypted disk] *****************************************************************************************************************************************
2024-08-19 05:29:34,093 p=14689 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:29:34,096 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create mount point directory] ****************************************************************************************************************************************************
2024-08-19 05:29:35,594 p=14689 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:29:35,604 p=14689 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Mount the encrypted disk] ********************************************************************************************************************************************************
2024-08-19 05:29:37,232 p=14689 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Error mounting /mnt/encrypted_disk: mount: /mnt/encrypted_disk: special device /dev/mapper/encrypted_disk does not exist.\n       dmesg(1) may have more information after failed mount system call.\n"}
2024-08-19 05:29:37,233 p=14689 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:29:37,233 p=14689 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=4    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-08-19 05:31:54,746 p=14770 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:31:54,751 p=14770 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:31:58,560 p=14770 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:31:58,560 p=14770 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:31:58,571 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Install cryptsetup package] ******************************************************************************************************************************************************
2024-08-19 05:32:00,790 p=14770 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:32:00,798 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 05:32:02,998 p=14770 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:32:03,007 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 05:32:03,019 p=14770 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:32:03,023 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 05:32:04,735 p=14770 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:32:04,743 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 05:32:06,338 p=14770 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:32:06,344 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Проверить существование зашифрованного устройства] *******************************************************************************************************************************
2024-08-19 05:32:07,846 p=14770 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:32:07,855 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Отладка показать информацию о зашифрованном устройстве] **************************************************************************************************************************
2024-08-19 05:32:07,870 p=14770 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "encrypted_disk_check": {
        "changed": true,
        "cmd": [
            "ls",
            "-l",
            "/dev/mapper/encrypted_disk"
        ],
        "delta": "0:00:00.004010",
        "end": "2024-08-19 02:32:10.102110",
        "failed": false,
        "failed_when_result": false,
        "msg": "non-zero return code",
        "rc": 2,
        "start": "2024-08-19 02:32:10.098100",
        "stderr": "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory",
        "stderr_lines": [
            "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2024-08-19 05:32:07,874 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create filesystem on the encrypted disk] *****************************************************************************************************************************************
2024-08-19 05:32:07,881 p=14770 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:32:07,884 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create mount point directory] ****************************************************************************************************************************************************
2024-08-19 05:32:09,437 p=14770 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:32:09,443 p=14770 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Mount the encrypted disk] ********************************************************************************************************************************************************
2024-08-19 05:32:10,986 p=14770 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Error mounting /mnt/encrypted_disk: mount: /mnt/encrypted_disk: special device /dev/mapper/encrypted_disk does not exist.\n       dmesg(1) may have more information after failed mount system call.\n"}
2024-08-19 05:32:10,989 p=14770 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:32:10,989 p=14770 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=3    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-08-19 05:38:04,124 p=14864 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:38:04,130 p=14864 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:38:08,132 p=14864 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:38:08,133 p=14864 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:08,143 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Install cryptsetup package] ******************************************************************************************************************************************************
2024-08-19 05:38:10,644 p=14864 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:10,651 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 05:38:12,156 p=14864 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:12,164 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 05:38:12,176 p=14864 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:38:12,181 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 05:38:13,712 p=14864 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:13,720 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 05:38:15,162 p=14864 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:15,168 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Проверить существование зашифрованного устройства] *******************************************************************************************************************************
2024-08-19 05:38:16,603 p=14864 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:16,611 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Отладка показать информацию о зашифрованном устройстве] **************************************************************************************************************************
2024-08-19 05:38:16,626 p=14864 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "encrypted_disk_check": {
        "changed": true,
        "cmd": [
            "ls",
            "-l",
            "/dev/mapper/encrypted_disk"
        ],
        "delta": "0:00:00.003856",
        "end": "2024-08-19 02:38:18.879661",
        "failed": false,
        "failed_when_result": false,
        "msg": "non-zero return code",
        "rc": 2,
        "start": "2024-08-19 02:38:18.875805",
        "stderr": "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory",
        "stderr_lines": [
            "ls: cannot access '/dev/mapper/encrypted_disk': No such file or directory"
        ],
        "stdout": "",
        "stdout_lines": []
    }
}
2024-08-19 05:38:16,630 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create filesystem on the encrypted disk] *****************************************************************************************************************************************
2024-08-19 05:38:16,637 p=14864 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:38:16,640 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Create mount point directory] ****************************************************************************************************************************************************
2024-08-19 05:38:18,154 p=14864 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:18,160 p=14864 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Mount the encrypted disk] ********************************************************************************************************************************************************
2024-08-19 05:38:19,752 p=14864 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Error mounting /mnt/encrypted_disk: mount: /mnt/encrypted_disk: special device /dev/mapper/encrypted_disk does not exist.\n       dmesg(1) may have more information after failed mount system call.\n"}
2024-08-19 05:38:19,754 p=14864 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:38:19,754 p=14864 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=8    changed=3    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-08-19 05:38:35,816 p=14946 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 05:38:35,821 p=14946 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 05:38:38,472 p=14946 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 05:38:38,472 p=14946 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:38,483 p=14946 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 05:38:40,006 p=14946 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 05:38:40,015 p=14946 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 05:38:40,028 p=14946 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 05:38:40,033 p=14946 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 05:38:41,519 p=14946 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:41,526 p=14946 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 05:38:42,971 p=14946 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:42,977 p=14946 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Проверить существование зашифрованного устройства] *******************************************************************************************************************************
2024-08-19 05:38:44,444 p=14946 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 05:38:44,464 p=14946 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 05:38:44,464 p=14946 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2024-08-19 06:19:44,857 p=15317 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:19:44,862 p=15317 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:19:49,015 p=15317 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:19:49,015 p=15317 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:19:49,028 p=15317 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:19:50,530 p=15317 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "cmd": ["lsblk", "-no", "MOUNTPOINTS,NAME", "|", "grep", "^/ ", "|", "awk", "{print $2}"], "delta": "0:00:00.005099", "end": "2024-08-19 03:19:52.926652", "msg": "non-zero return code", "rc": 32, "start": "2024-08-19 03:19:52.921553", "stderr": "lsblk: |: not a block device\nlsblk: grep: not a block device\nlsblk: ^/ : not a block device\nlsblk: |: not a block device\nlsblk: awk: not a block device\nlsblk: {print $2}: not a block device", "stderr_lines": ["lsblk: |: not a block device", "lsblk: grep: not a block device", "lsblk: ^/ : not a block device", "lsblk: |: not a block device", "lsblk: awk: not a block device", "lsblk: {print $2}: not a block device"], "stdout": "", "stdout_lines": []}
2024-08-19 06:19:50,532 p=15317 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:19:50,532 p=15317 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-19 06:21:01,662 p=15346 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:21:01,667 p=15346 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:21:05,608 p=15346 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:21:05,609 p=15346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:05,623 p=15346 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:21:07,305 p=15346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:07,311 p=15346 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:21:07,325 p=15346 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:07,330 p=15346 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:21:08,460 p=15346 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:21:17,740 p=15381 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:21:17,745 p=15381 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:21:20,449 p=15381 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:21:20,449 p=15381 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:20,461 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:21:21,959 p=15381 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:21,969 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:21:21,985 p=15381 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:21,989 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:21:23,714 p=15381 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:23,722 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:21:23,736 p=15381 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:21:23,741 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:21:23,748 p=15381 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:21:23,751 p=15381 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:21:25,185 p=15381 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": true, "cmd": ["cryptsetup", "luksFormat", "/dev/├─xvda14"], "delta": "0:00:00.005683", "end": "2024-08-19 03:21:27.589164", "msg": "non-zero return code", "rc": 4, "start": "2024-08-19 03:21:27.583481", "stderr": "Device /dev/├─xvda14 does not exist or access denied.", "stderr_lines": ["Device /dev/├─xvda14 does not exist or access denied."], "stdout": "", "stdout_lines": []}
2024-08-19 06:21:25,186 p=15381 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:21:25,186 p=15381 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 06:32:54,330 p=15551 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:32:54,336 p=15551 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:32:58,285 p=15551 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:32:58,285 p=15551 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:32:58,298 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:32:59,799 p=15551 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:32:59,808 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:32:59,822 p=15551 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:32:59,826 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:33:01,272 p=15551 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:33:01,283 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:33:01,298 p=15551 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:33:01,302 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:33:01,310 p=15551 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:33:01,314 p=15551 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:35:14,769 p=15551 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:36:19,566 p=15602 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:36:19,572 p=15602 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:36:23,484 p=15602 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:36:23,485 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:23,497 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:36:25,003 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:25,010 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:36:25,024 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:25,028 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:36:26,476 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:26,485 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:36:26,500 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:26,505 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:36:26,513 p=15602 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:36:26,517 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Подтверждение шифрования (yes/no)] ********************************************************************************************************************************************
2024-08-19 06:36:26,525 p=15602 u=aleksandr.pintaev n=ansible | [encrypt_near_root_part : Подтверждение шифрования (yes/no)]
Вы уверены, что хотите зашифровать раздел /dev/xvda14? Это удалит все данные на нем (yes/no):
2024-08-19 06:36:29,822 p=15602 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:29,831 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отмена операции, если подтверждение не дано] **********************************************************************************************************************************
2024-08-19 06:36:29,844 p=15602 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:36:29,849 p=15602 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:36:38,681 p=15602 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:36:39,903 p=15649 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:36:39,908 p=15649 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:36:42,534 p=15649 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:36:42,535 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:42,546 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:36:44,045 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:44,055 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:36:44,070 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:44,074 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:36:45,510 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:45,519 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:36:45,534 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:45,539 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:36:45,547 p=15649 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:36:45,550 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Подтверждение шифрования (yes/no)] ********************************************************************************************************************************************
2024-08-19 06:36:45,558 p=15649 u=aleksandr.pintaev n=ansible | [encrypt_near_root_part : Подтверждение шифрования (yes/no)]
Вы уверены, что хотите зашифровать раздел /dev/xvda14? Это удалит все данные на нем (yes/no):
2024-08-19 06:36:49,012 p=15649 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:36:49,019 p=15649 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отмена операции, если подтверждение не дано] **********************************************************************************************************************************
2024-08-19 06:36:49,035 p=15649 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Операция отменена пользователем."}
2024-08-19 06:36:49,036 p=15649 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:36:49,036 p=15649 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=6    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 06:37:00,509 p=15686 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:37:00,515 p=15686 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:37:03,213 p=15686 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:37:03,214 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:03,226 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:37:05,010 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:05,018 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:37:05,033 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:05,037 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:37:06,522 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:06,530 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:37:06,544 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:06,549 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:37:06,556 p=15686 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:37:06,559 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Подтверждение шифрования (yes/no)] ********************************************************************************************************************************************
2024-08-19 06:37:06,567 p=15686 u=aleksandr.pintaev n=ansible | [encrypt_near_root_part : Подтверждение шифрования (yes/no)]
Вы уверены, что хотите зашифровать раздел /dev/xvda14? Это удалит все данные на нем (yes/no):
2024-08-19 06:37:09,077 p=15686 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:37:09,085 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Отмена операции, если подтверждение не дано] **********************************************************************************************************************************
2024-08-19 06:37:09,097 p=15686 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:37:09,101 p=15686 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:38:08,440 p=15686 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:38:32,107 p=15734 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:38:32,117 p=15734 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:38:34,793 p=15734 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:38:34,794 p=15734 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:38:34,809 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:38:36,359 p=15734 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:38:36,370 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:38:36,389 p=15734 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:38:36,394 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:38:37,863 p=15734 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:38:37,872 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:38:37,886 p=15734 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:38:37,891 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:38:37,898 p=15734 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:38:37,902 p=15734 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:39:17,854 p=15734 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:41:56,084 p=15807 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:41:56,089 p=15807 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:41:59,963 p=15807 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:41:59,963 p=15807 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:41:59,974 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:42:01,754 p=15807 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:42:01,763 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:42:01,776 p=15807 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:42:01,780 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:42:03,277 p=15807 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:42:03,287 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:42:03,303 p=15807 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:42:03,308 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:42:03,316 p=15807 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:42:03,319 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Шифрование раздела с использованием LUKS] *************************************************************************************************************************************
2024-08-19 06:42:18,742 p=15807 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:42:18,747 p=15807 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Открытие шифрованного раздела] ************************************************************************************************************************************************
2024-08-19 06:45:28,934 p=15807 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:46:40,894 p=15883 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:46:40,899 p=15883 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:46:44,825 p=15883 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:46:44,826 p=15883 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:46:44,838 p=15883 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 06:46:46,349 p=15883 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:46:46,357 p=15883 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 06:46:46,368 p=15883 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:46:46,373 p=15883 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 06:46:47,871 p=15883 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:46:47,879 p=15883 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 06:46:49,340 p=15883 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:46:49,347 p=15883 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : check] ***************************************************************************************************************************************************************************
2024-08-19 06:46:50,793 p=15883 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:46:50,815 p=15883 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:46:50,815 p=15883 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=5    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2024-08-19 06:47:40,064 p=15937 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:47:40,069 p=15937 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:47:42,695 p=15937 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:47:42,696 p=15937 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:47:42,711 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:47:44,269 p=15937 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:47:44,278 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:47:44,292 p=15937 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:47:44,296 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:47:45,751 p=15937 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:47:45,761 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:47:45,778 p=15937 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:47:45,783 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:47:45,792 p=15937 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:47:45,796 p=15937 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Encrypt the disk with LUKS] ***************************************************************************************************************************************************
2024-08-19 06:47:45,826 p=15937 u=aleksandr.pintaev n=ansible |  [ERROR]: User interrupted execution

2024-08-19 06:49:44,347 p=15976 u=aleksandr.pintaev n=ansible | PLAY [Execute role] ******************************************************************************************************************************************************************************************
2024-08-19 06:49:44,352 p=15976 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:50:01,612 p=15976 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:50:01,613 p=15976 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:50:01,626 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Определение root диска] *******************************************************************************************************************************************************
2024-08-19 06:50:06,227 p=15976 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:50:06,237 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени root диска] **************************************************************************************************************************************************
2024-08-19 06:50:06,252 p=15976 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:50:06,257 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Поиск раздела для шифрования] *************************************************************************************************************************************************
2024-08-19 06:50:07,702 p=15976 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:50:07,712 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Извлечение имени раздела для шифрования] **************************************************************************************************************************************
2024-08-19 06:50:07,727 p=15976 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:50:07,731 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Проверка, найден ли раздел для шифрования] ************************************************************************************************************************************
2024-08-19 06:50:07,739 p=15976 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:50:07,742 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Encrypt the disk with LUKS] ***************************************************************************************************************************************************
2024-08-19 06:50:09,174 p=15976 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:50:09,184 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Open the encrypted disk] ******************************************************************************************************************************************************
2024-08-19 06:50:10,677 p=15976 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:50:10,685 p=15976 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Создание файловой системы на шифрованном разделе] *****************************************************************************************************************************
2024-08-19 06:50:12,252 p=15976 u=aleksandr.pintaev n=ansible | fatal: [3.121.22.114]: FAILED! => {"changed": false, "msg": "Device /dev/mapper/encrypted_partition not found."}
2024-08-19 06:50:12,253 p=15976 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:50:12,254 p=15976 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=7    changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2024-08-19 06:57:36,585 p=16231 u=aleksandr.pintaev n=ansible | PLAY [Prepare Server] ****************************************************************************************************************************************************************************************
2024-08-19 06:57:36,591 p=16231 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************************************************************************
2024-08-19 06:57:53,580 p=16231 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host 3.121.22.114 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the meaning of that
path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-08-19 06:57:53,581 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:57:53,592 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Check if the disk exists] ********************************************************************************************************************************************************
2024-08-19 06:57:58,193 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:57:58,203 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Fail if disk does not exist] *****************************************************************************************************************************************************
2024-08-19 06:57:58,216 p=16231 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:57:58,221 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Encrypt the disk with LUKS] ******************************************************************************************************************************************************
2024-08-19 06:58:02,653 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:02,662 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : Open the encrypted disk] *********************************************************************************************************************************************************
2024-08-19 06:58:07,132 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:58:07,141 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_second_disk : check] ***************************************************************************************************************************************************************************
2024-08-19 06:58:11,760 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:58:11,772 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : name root disk] ***************************************************************************************************************************************************************
2024-08-19 06:58:16,495 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:16,505 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : extract name root disk] *******************************************************************************************************************************************************
2024-08-19 06:58:16,520 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:16,524 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : find partition] ***************************************************************************************************************************************************************
2024-08-19 06:58:21,090 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:21,100 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : extract target partittion] ****************************************************************************************************************************************************
2024-08-19 06:58:21,115 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:21,120 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : check partition] **************************************************************************************************************************************************************
2024-08-19 06:58:21,127 p=16231 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:58:21,130 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Encrypt the disk with LUKS] ***************************************************************************************************************************************************
2024-08-19 06:58:25,958 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:58:25,966 p=16231 u=aleksandr.pintaev n=ansible | TASK [encrypt_near_root_part : Open the encrypted disk] ******************************************************************************************************************************************************
2024-08-19 06:58:30,910 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:58:30,924 p=16231 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : Add noacpi parameter to GRUB configuration] ******************************************************************************************************************************************
2024-08-19 06:58:35,435 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:35,445 p=16231 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : copy script c-states] ****************************************************************************************************************************************************************
2024-08-19 06:58:44,276 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:44,285 p=16231 u=aleksandr.pintaev n=ansible | TASK [disable_c_state : execute c-states] ********************************************************************************************************************************************************************
2024-08-19 06:58:48,830 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:58:48,841 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***********************************************************************************************************************************
2024-08-19 06:58:53,341 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:53,352 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Set the active network interface name] **************************************************************************************************************************************
2024-08-19 06:58:53,367 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:53,370 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already] *****************************************************************************************************************************
2024-08-19 06:58:53,378 p=16231 u=aleksandr.pintaev n=ansible | skipping: [3.121.22.114]
2024-08-19 06:58:53,382 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if netplan configuration file exists] *********************************************************************************************************************************
2024-08-19 06:58:57,928 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:58:57,938 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name using sed] *************************************************************************************************************
2024-08-19 06:59:02,317 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:59:02,325 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ************************************************************************************************************************************************
2024-08-19 06:59:18,483 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:59:18,491 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ********************************************************************************************************************
2024-08-19 06:59:23,350 p=16231 u=aleksandr.pintaev n=ansible | [WARNING]: conditional statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: renamed_interface.stdout.strip() != "{{ new_interface_name }}"

2024-08-19 06:59:23,358 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:59:23,366 p=16231 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Display the renamed network interface name] *********************************************************************************************************************************
2024-08-19 06:59:23,381 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "The network interface is now named net0"
}
2024-08-19 06:59:23,388 p=16231 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display list of CPUs] *****************************************************************************************************************************************************************
2024-08-19 06:59:28,020 p=16231 u=aleksandr.pintaev n=ansible | changed: [3.121.22.114]
2024-08-19 06:59:28,027 p=16231 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Show list of CPUs] ********************************************************************************************************************************************************************
2024-08-19 06:59:28,042 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "Architecture:                         x86_64\nCPU op-mode(s):                       32-bit, 64-bit\nAddress sizes:                        46 bits physical, 48 bits virtual\nByte Order:                           Little Endian\nCPU(s):                               1\nOn-line CPU(s) list:                  0\nVendor ID:                            GenuineIntel\nBIOS Vendor ID:                       Intel\nModel name:                           Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz\nBIOS Model name:                        CPU @ 2.4GHz\nBIOS CPU family:                      1\nCPU family:                           6\nModel:                                63\nThread(s) per core:                   1\nCore(s) per socket:                   1\nSocket(s):                            1\nStepping:                             2\nBogoMIPS:                             4800.04\nFlags:                                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt\nHypervisor vendor:                    Xen\nVirtualization type:                  full\nL1d cache:                            32 KiB (1 instance)\nL1i cache:                            32 KiB (1 instance)\nL2 cache:                             256 KiB (1 instance)\nL3 cache:                             30 MiB (1 instance)\nNUMA node(s):                         1\nNUMA node0 CPU(s):                    0\nVulnerability Gather data sampling:   Not affected\nVulnerability Itlb multihit:          KVM: Mitigation: VMX unsupported\nVulnerability L1tf:                   Mitigation; PTE Inversion\nVulnerability Mds:                    Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Meltdown:               Mitigation; PTI\nVulnerability Mmio stale data:        Vulnerable: Clear CPU buffers attempted, no microcode; SMT Host state unknown\nVulnerability Reg file data sampling: Not affected\nVulnerability Retbleed:               Not affected\nVulnerability Spec rstack overflow:   Not affected\nVulnerability Spec store bypass:      Vulnerable\nVulnerability Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization\nVulnerability Spectre v2:             Mitigation; Retpolines; STIBP disabled; RSB filling; PBRSB-eIBRS Not affected; BHI Retpoline\nVulnerability Srbds:                  Not affected\nVulnerability Tsx async abort:        Not affected"
}
2024-08-19 06:59:28,046 p=16231 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Check if Hyper-Threading is enabled] **************************************************************************************************************************************************
2024-08-19 06:59:32,499 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114]
2024-08-19 06:59:32,508 p=16231 u=aleksandr.pintaev n=ansible | TASK [display_cpu_ht : Display Hyper-Threading information] **************************************************************************************************************************************************
2024-08-19 06:59:32,523 p=16231 u=aleksandr.pintaev n=ansible | ok: [3.121.22.114] => {
    "msg": "flags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm cpuid_fault pti fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt"
}
2024-08-19 06:59:32,539 p=16231 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2024-08-19 06:59:32,539 p=16231 u=aleksandr.pintaev n=ansible | 3.121.22.114               : ok=25   changed=8    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2024-09-14 14:57:04,279 p=95747 u=aleksandr.pintaev n=ansible | PLAY [Encrypt the second disk in the system] *****************************************************************************************************
2024-09-14 14:57:04,288 p=95747 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-09-14 14:57:24,017 p=95747 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host test is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-
core/2.17/reference_appendices/interpreter_discovery.html for more information.

2024-09-14 14:57:24,018 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:57:24,023 p=95747 u=aleksandr.pintaev n=ansible | TASK [Set disk name] *****************************************************************************************************************************
2024-09-14 14:57:24,044 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:57:24,056 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Check if the partition exists] *****************************************************************************************
2024-09-14 14:57:28,569 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:57:28,578 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail if partition does not exist] **************************************************************************************
2024-09-14 14:57:28,597 p=95747 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 14:57:28,603 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Install cryptsetup] ****************************************************************************************************
2024-09-14 14:57:40,811 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:57:40,823 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : (Create and) open the LUKS container with a passphrase] ****************************************************************
2024-09-14 14:58:05,851 p=95747 u=aleksandr.pintaev n=ansible | changed: [test]
2024-09-14 14:58:05,861 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail open LUKS container] **********************************************************************************************
2024-09-14 14:58:05,874 p=95747 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 14:58:05,891 p=95747 u=aleksandr.pintaev n=ansible | PLAY [Encrypt partition next to root] ************************************************************************************************************
2024-09-14 14:58:05,895 p=95747 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-09-14 14:58:15,714 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:58:15,719 p=95747 u=aleksandr.pintaev n=ansible | TASK [Extract root disk partition name] **********************************************************************************************************
2024-09-14 14:58:15,789 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:58:15,792 p=95747 u=aleksandr.pintaev n=ansible | TASK [Get target partition name] *****************************************************************************************************************
2024-09-14 14:58:15,811 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:58:15,814 p=95747 u=aleksandr.pintaev n=ansible | TASK [Display partition name] ********************************************************************************************************************
2024-09-14 14:58:15,823 p=95747 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": "Next to root partiton: /dev/root1"
}
2024-09-14 14:58:15,831 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Check if the partition exists] *****************************************************************************************
2024-09-14 14:58:20,517 p=95747 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 14:58:20,524 p=95747 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail if partition does not exist] **************************************************************************************
2024-09-14 14:58:20,542 p=95747 u=aleksandr.pintaev n=ansible | fatal: [test]: FAILED! => {"changed": false, "msg": "Partition /dev/root1 does not exist."}
2024-09-14 14:58:20,542 p=95747 u=aleksandr.pintaev n=ansible | PLAY RECAP ***************************************************************************************************************************************
2024-09-14 14:58:20,542 p=95747 u=aleksandr.pintaev n=ansible | test                       : ok=10   changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-09-14 15:04:31,742 p=96386 u=aleksandr.pintaev n=ansible | PLAY [Encrypt the second disk in the system] *********************************************************************************************************
2024-09-14 15:04:31,748 p=96386 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:04:48,650 p=96386 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host test is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for
more information.

2024-09-14 15:04:48,651 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:04:48,657 p=96386 u=aleksandr.pintaev n=ansible | TASK [Set disk name] *********************************************************************************************************************************
2024-09-14 15:04:48,670 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:04:48,678 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Check if the partition exists] *********************************************************************************************
2024-09-14 15:04:53,304 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:04:53,316 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail if partition does not exist] ******************************************************************************************
2024-09-14 15:04:53,329 p=96386 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:04:53,334 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Install cryptsetup] ********************************************************************************************************
2024-09-14 15:05:05,427 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:05,438 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : (Create and) open the LUKS container with a passphrase] ********************************************************************
2024-09-14 15:05:10,254 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:10,263 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail open LUKS container] **************************************************************************************************
2024-09-14 15:05:10,276 p=96386 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:05:10,295 p=96386 u=aleksandr.pintaev n=ansible | PLAY [Encrypt partition next to root] ****************************************************************************************************************
2024-09-14 15:05:10,299 p=96386 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:05:20,353 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:20,360 p=96386 u=aleksandr.pintaev n=ansible | TASK [debug] *****************************************************************************************************************************************
2024-09-14 15:05:20,378 p=96386 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "ansible_mounts": [
        {
            "block_available": 1123486,
            "block_size": 4096,
            "block_total": 1758594,
            "block_used": 635108,
            "device": "/dev/root",
            "dump": 0,
            "fstype": "ext4",
            "inode_available": 798947,
            "inode_total": 917504,
            "inode_used": 118557,
            "mount": "/",
            "options": "rw,relatime,discard,errors=remount-ro,commit=30",
            "passno": 0,
            "size_available": 4601798656,
            "size_total": 7203201024,
            "uuid": "e97ae3ba-1e02-4d97-9427-d5f37ff742a9"
        },
        {
            "block_available": 0,
            "block_size": 131072,
            "block_total": 202,
            "block_used": 202,
            "device": "/dev/loop0",
            "dump": 0,
            "fstype": "squashfs",
            "inode_available": 0,
            "inode_total": 16,
            "inode_used": 16,
            "mount": "/snap/amazon-ssm-agent/7993",
            "options": "ro,nodev,relatime,errors=continue,threads=single",
            "passno": 0,
            "size_available": 0,
            "size_total": 26476544,
            "uuid": "N/A"
        },
        {
            "block_available": 0,
            "block_size": 131072,
            "block_total": 446,
            "block_used": 446,
            "device": "/dev/loop1",
            "dump": 0,
            "fstype": "squashfs",
            "inode_available": 0,
            "inode_total": 10944,
            "inode_used": 10944,
            "mount": "/snap/core18/2829",
            "options": "ro,nodev,relatime,errors=continue,threads=single",
            "passno": 0,
            "size_available": 0,
            "size_total": 58458112,
            "uuid": "N/A"
        },
        {
            "block_available": 0,
            "block_size": 131072,
            "block_total": 311,
            "block_used": 311,
            "device": "/dev/loop2",
            "dump": 0,
            "fstype": "squashfs",
            "inode_available": 0,
            "inode_total": 651,
            "inode_used": 651,
            "mount": "/snap/snapd/21759",
            "options": "ro,nodev,relatime,errors=continue,threads=single",
            "passno": 0,
            "size_available": 0,
            "size_total": 40763392,
            "uuid": "N/A"
        },
        {
            "block_available": 175787,
            "block_size": 4096,
            "block_total": 225380,
            "block_used": 49593,
            "device": "/dev/xvda16",
            "dump": 0,
            "fstype": "ext4",
            "inode_available": 57891,
            "inode_total": 58496,
            "inode_used": 605,
            "mount": "/boot",
            "options": "rw,relatime",
            "passno": 0,
            "size_available": 720023552,
            "size_total": 923156480,
            "uuid": "9df3be1d-f619-4991-af0c-2c556f66595f"
        },
        {
            "block_available": 201172,
            "block_size": 512,
            "block_total": 213663,
            "block_used": 12491,
            "device": "/dev/xvda15",
            "dump": 0,
            "fstype": "vfat",
            "inode_available": 0,
            "inode_total": 0,
            "inode_used": 0,
            "mount": "/boot/efi",
            "options": "rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro",
            "passno": 0,
            "size_available": 103000064,
            "size_total": 109395456,
            "uuid": "349B-1BE8"
        }
    ]
}
2024-09-14 15:05:20,381 p=96386 u=aleksandr.pintaev n=ansible | TASK [Extract root disk partition name] **************************************************************************************************************
2024-09-14 15:05:20,421 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:20,424 p=96386 u=aleksandr.pintaev n=ansible | TASK [Get target partition name] *********************************************************************************************************************
2024-09-14 15:05:20,439 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:20,442 p=96386 u=aleksandr.pintaev n=ansible | TASK [Display partition name] ************************************************************************************************************************
2024-09-14 15:05:20,449 p=96386 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": "Next to root partiton: /dev/root1"
}
2024-09-14 15:05:20,455 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Check if the partition exists] *********************************************************************************************
2024-09-14 15:05:24,808 p=96386 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:05:24,820 p=96386 u=aleksandr.pintaev n=ansible | TASK [encrypt_partition : Fail if partition does not exist] ******************************************************************************************
2024-09-14 15:05:24,836 p=96386 u=aleksandr.pintaev n=ansible | fatal: [test]: FAILED! => {"changed": false, "msg": "Partition /dev/root1 does not exist."}
2024-09-14 15:05:24,837 p=96386 u=aleksandr.pintaev n=ansible | PLAY RECAP *******************************************************************************************************************************************
2024-09-14 15:05:24,837 p=96386 u=aleksandr.pintaev n=ansible | test                       : ok=11   changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-09-14 15:12:50,793 p=97075 u=aleksandr.pintaev n=ansible | PLAY [Rename network interfaces] *********************************************************************************************************************
2024-09-14 15:12:50,802 p=97075 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:13:08,001 p=97075 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host test is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for
more information.

2024-09-14 15:13:08,001 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:08,042 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***************************************************************************
2024-09-14 15:13:08,053 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:08,056 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Information about interface] ****************************************************************************************
2024-09-14 15:13:08,066 p=97075 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "ansible_facts[current_interface_name]": {
        "active": true,
        "device": "enX0",
        "features": {
            "esp_hw_offload": "off [fixed]",
            "esp_tx_csum_hw_offload": "off [fixed]",
            "fcoe_mtu": "off [fixed]",
            "generic_receive_offload": "on",
            "generic_segmentation_offload": "on",
            "highdma": "off [fixed]",
            "hsr_dup_offload": "off [fixed]",
            "hsr_fwd_offload": "off [fixed]",
            "hsr_tag_ins_offload": "off [fixed]",
            "hsr_tag_rm_offload": "off [fixed]",
            "hw_tc_offload": "off [fixed]",
            "l2_fwd_offload": "off [fixed]",
            "large_receive_offload": "off [fixed]",
            "loopback": "off [fixed]",
            "macsec_hw_offload": "off [fixed]",
            "netns_local": "off [fixed]",
            "ntuple_filters": "off [fixed]",
            "receive_hashing": "off [fixed]",
            "rx_all": "off [fixed]",
            "rx_checksumming": "on [fixed]",
            "rx_fcs": "off [fixed]",
            "rx_gro_hw": "off [fixed]",
            "rx_gro_list": "off",
            "rx_udp_gro_forwarding": "off",
            "rx_udp_tunnel_port_offload": "off [fixed]",
            "rx_vlan_filter": "off [fixed]",
            "rx_vlan_offload": "off [fixed]",
            "rx_vlan_stag_filter": "off [fixed]",
            "rx_vlan_stag_hw_parse": "off [fixed]",
            "scatter_gather": "on",
            "tcp_segmentation_offload": "on",
            "tls_hw_record": "off [fixed]",
            "tls_hw_rx_offload": "off [fixed]",
            "tls_hw_tx_offload": "off [fixed]",
            "tx_checksum_fcoe_crc": "off [fixed]",
            "tx_checksum_ip_generic": "off [fixed]",
            "tx_checksum_ipv4": "on [fixed]",
            "tx_checksum_ipv6": "on",
            "tx_checksum_sctp": "off [fixed]",
            "tx_checksumming": "on",
            "tx_esp_segmentation": "off [fixed]",
            "tx_fcoe_segmentation": "off [fixed]",
            "tx_gre_csum_segmentation": "off [fixed]",
            "tx_gre_segmentation": "off [fixed]",
            "tx_gso_list": "off [fixed]",
            "tx_gso_partial": "off [fixed]",
            "tx_gso_robust": "on [fixed]",
            "tx_ipxip4_segmentation": "off [fixed]",
            "tx_ipxip6_segmentation": "off [fixed]",
            "tx_lockless": "off [fixed]",
            "tx_nocache_copy": "off",
            "tx_scatter_gather": "on",
            "tx_scatter_gather_fraglist": "off [fixed]",
            "tx_sctp_segmentation": "off [fixed]",
            "tx_tcp6_segmentation": "on",
            "tx_tcp_ecn_segmentation": "off [fixed]",
            "tx_tcp_mangleid_segmentation": "off",
            "tx_tcp_segmentation": "on",
            "tx_tunnel_remcsum_segmentation": "off [fixed]",
            "tx_udp_segmentation": "off [fixed]",
            "tx_udp_tnl_csum_segmentation": "off [fixed]",
            "tx_udp_tnl_segmentation": "off [fixed]",
            "tx_vlan_offload": "off [fixed]",
            "tx_vlan_stag_hw_insert": "off [fixed]",
            "vlan_challenged": "off [fixed]"
        },
        "hw_timestamp_filters": [],
        "ipv4": {
            "address": "172.30.42.149",
            "broadcast": "",
            "netmask": "255.255.240.0",
            "network": "172.30.32.0",
            "prefix": "20"
        },
        "ipv6": [
            {
                "address": "fe80::48e:b3ff:fece:73d7",
                "prefix": "64",
                "scope": "link"
            }
        ],
        "macaddress": "06:8e:b3:ce:73:d7",
        "mtu": 9001,
        "pciid": "vif-0",
        "promisc": false,
        "timestamping": [],
        "type": "ether"
    }
}
2024-09-14 15:13:08,069 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already renamed] *************************************************************
2024-09-14 15:13:08,075 p=97075 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:13:08,077 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Capturing Existing Configuration] ***********************************************************************************
2024-09-14 15:13:12,939 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:12,948 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name] ***************************************************************
2024-09-14 15:13:17,499 p=97075 u=aleksandr.pintaev n=ansible | changed: [test]
2024-09-14 15:13:17,509 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ****************************************************************************************
2024-09-14 15:13:31,945 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:31,957 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current network interface from default route] ***************************************************************
2024-09-14 15:13:36,460 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:36,468 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Parse the renamed network interface from route output] **************************************************************
2024-09-14 15:13:36,503 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:36,507 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ************************************************************
2024-09-14 15:13:36,515 p=97075 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:13:36,518 p=97075 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Display the renamed network interface name] *************************************************************************
2024-09-14 15:13:36,527 p=97075 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": "The network interface is now named net0"
}
2024-09-14 15:13:36,539 p=97075 u=aleksandr.pintaev n=ansible | PLAY [CPU performance improvements] ******************************************************************************************************************
2024-09-14 15:13:36,542 p=97075 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:13:46,169 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:46,184 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Get current C-state] **************************************************************************************************
2024-09-14 15:13:50,744 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:13:50,750 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Print current C-state] ************************************************************************************************
2024-09-14 15:13:50,765 p=97075 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": [
        "CPUidle driver: acpi_idle",
        "CPUidle governor: menu",
        "analyzing CPU 0:",
        "",
        "Number of idle states: 2",
        "Available idle states: POLL C1",
        "POLL (DISABLED) :",
        "Flags/Description: CPUIDLE CORE POLL IDLE",
        "Latency: 0",
        "Usage: 3580397002",
        "Duration: 2261065424417",
        "C1 (DISABLED) :",
        "Flags/Description: ACPI HLT",
        "Latency: 0",
        "Usage: 6568633",
        "Duration: 577548689531"
    ]
}
2024-09-14 15:13:50,770 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Disable C-state in GRUB_CMDLINE_LINUX] ********************************************************************************
2024-09-14 15:13:55,253 p=97075 u=aleksandr.pintaev n=ansible | changed: [test] => (item=processor.max_cstate)
2024-09-14 15:13:59,693 p=97075 u=aleksandr.pintaev n=ansible | changed: [test] => (item=intel_idle.max_cstate)
2024-09-14 15:13:59,706 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Disable C-state now] **************************************************************************************************
2024-09-14 15:14:04,367 p=97075 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:14:04,379 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Install cpufrequtils] *************************************************************************************************
2024-09-14 15:15:09,322 p=97075 u=aleksandr.pintaev n=ansible | changed: [test]
2024-09-14 15:15:09,334 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Set governor to performance] ******************************************************************************************
2024-09-14 15:15:13,036 p=97075 u=aleksandr.pintaev n=ansible | changed: [test]
2024-09-14 15:15:13,046 p=97075 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Verify CPU governor has been set to performance] **********************************************************************
2024-09-14 15:15:14,796 p=97075 u=aleksandr.pintaev n=ansible | fatal: [test]: FAILED! => {"changed": false, "cmd": ["cat", "/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor"], "delta": "0:00:00.003719", "end": "2024-09-14 12:15:14.703195", "msg": "non-zero return code", "rc": 1, "start": "2024-09-14 12:15:14.699476", "stderr": "cat: '/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor': No such file or directory", "stderr_lines": ["cat: '/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor': No such file or directory"], "stdout": "", "stdout_lines": []}
2024-09-14 15:15:14,798 p=97075 u=aleksandr.pintaev n=ansible | PLAY RECAP *******************************************************************************************************************************************
2024-09-14 15:15:14,798 p=97075 u=aleksandr.pintaev n=ansible | test                       : ok=16   changed=4    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2024-09-14 15:17:33,757 p=97571 u=aleksandr.pintaev n=ansible | PLAY [Rename network interfaces] *********************************************************************************************************************
2024-09-14 15:17:33,763 p=97571 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:17:51,862 p=97571 u=aleksandr.pintaev n=ansible | [WARNING]: Platform linux on host test is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.17/reference_appendices/interpreter_discovery.html for
more information.

2024-09-14 15:17:51,863 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:17:51,876 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current active network interface] ***************************************************************************
2024-09-14 15:17:51,898 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:17:51,903 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Information about interface] ****************************************************************************************
2024-09-14 15:17:51,920 p=97571 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "ansible_facts[current_interface_name]": {
        "active": true,
        "device": "net0",
        "features": {
            "esp_hw_offload": "off [fixed]",
            "esp_tx_csum_hw_offload": "off [fixed]",
            "fcoe_mtu": "off [fixed]",
            "generic_receive_offload": "on",
            "generic_segmentation_offload": "on",
            "highdma": "off [fixed]",
            "hsr_dup_offload": "off [fixed]",
            "hsr_fwd_offload": "off [fixed]",
            "hsr_tag_ins_offload": "off [fixed]",
            "hsr_tag_rm_offload": "off [fixed]",
            "hw_tc_offload": "off [fixed]",
            "l2_fwd_offload": "off [fixed]",
            "large_receive_offload": "off [fixed]",
            "loopback": "off [fixed]",
            "macsec_hw_offload": "off [fixed]",
            "netns_local": "off [fixed]",
            "ntuple_filters": "off [fixed]",
            "receive_hashing": "off [fixed]",
            "rx_all": "off [fixed]",
            "rx_checksumming": "on [fixed]",
            "rx_fcs": "off [fixed]",
            "rx_gro_hw": "off [fixed]",
            "rx_gro_list": "off",
            "rx_udp_gro_forwarding": "off",
            "rx_udp_tunnel_port_offload": "off [fixed]",
            "rx_vlan_filter": "off [fixed]",
            "rx_vlan_offload": "off [fixed]",
            "rx_vlan_stag_filter": "off [fixed]",
            "rx_vlan_stag_hw_parse": "off [fixed]",
            "scatter_gather": "on",
            "tcp_segmentation_offload": "on",
            "tls_hw_record": "off [fixed]",
            "tls_hw_rx_offload": "off [fixed]",
            "tls_hw_tx_offload": "off [fixed]",
            "tx_checksum_fcoe_crc": "off [fixed]",
            "tx_checksum_ip_generic": "off [fixed]",
            "tx_checksum_ipv4": "on [fixed]",
            "tx_checksum_ipv6": "on",
            "tx_checksum_sctp": "off [fixed]",
            "tx_checksumming": "on",
            "tx_esp_segmentation": "off [fixed]",
            "tx_fcoe_segmentation": "off [fixed]",
            "tx_gre_csum_segmentation": "off [fixed]",
            "tx_gre_segmentation": "off [fixed]",
            "tx_gso_list": "off [fixed]",
            "tx_gso_partial": "off [fixed]",
            "tx_gso_robust": "on [fixed]",
            "tx_ipxip4_segmentation": "off [fixed]",
            "tx_ipxip6_segmentation": "off [fixed]",
            "tx_lockless": "off [fixed]",
            "tx_nocache_copy": "off",
            "tx_scatter_gather": "on",
            "tx_scatter_gather_fraglist": "off [fixed]",
            "tx_sctp_segmentation": "off [fixed]",
            "tx_tcp6_segmentation": "on",
            "tx_tcp_ecn_segmentation": "off [fixed]",
            "tx_tcp_mangleid_segmentation": "off",
            "tx_tcp_segmentation": "on",
            "tx_tunnel_remcsum_segmentation": "off [fixed]",
            "tx_udp_segmentation": "off [fixed]",
            "tx_udp_tnl_csum_segmentation": "off [fixed]",
            "tx_udp_tnl_segmentation": "off [fixed]",
            "tx_vlan_offload": "off [fixed]",
            "tx_vlan_stag_hw_insert": "off [fixed]",
            "vlan_challenged": "off [fixed]"
        },
        "hw_timestamp_filters": [],
        "ipv4": {
            "address": "172.30.42.149",
            "broadcast": "",
            "netmask": "255.255.240.0",
            "network": "172.30.32.0",
            "prefix": "20"
        },
        "ipv6": [
            {
                "address": "fe80::48e:b3ff:fece:73d7",
                "prefix": "64",
                "scope": "link"
            }
        ],
        "macaddress": "06:8e:b3:ce:73:d7",
        "mtu": 9001,
        "pciid": "vif-0",
        "promisc": false,
        "timestamping": [],
        "type": "ether"
    }
}
2024-09-14 15:17:51,923 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the current interface name is already renamed] *************************************************************
2024-09-14 15:17:51,932 p=97571 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": "The active network interface is already named net0."
}
2024-09-14 15:17:51,934 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Capturing Existing Configuration] ***********************************************************************************
2024-09-14 15:17:51,941 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,944 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Update netplan configuration with new interface name] ***************************************************************
2024-09-14 15:17:51,950 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,953 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Apply netplan configuration] ****************************************************************************************
2024-09-14 15:17:51,958 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,961 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Get the current network interface from default route] ***************************************************************
2024-09-14 15:17:51,967 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,969 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Parse the renamed network interface from route output] **************************************************************
2024-09-14 15:17:51,976 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,978 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Check if the network interface was successfully renamed] ************************************************************
2024-09-14 15:17:51,984 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:51,986 p=97571 u=aleksandr.pintaev n=ansible | TASK [network_interface_rename : Display the renamed network interface name] *************************************************************************
2024-09-14 15:17:51,991 p=97571 u=aleksandr.pintaev n=ansible | skipping: [test]
2024-09-14 15:17:52,002 p=97571 u=aleksandr.pintaev n=ansible | PLAY [CPU performance improvements] ******************************************************************************************************************
2024-09-14 15:17:52,005 p=97571 u=aleksandr.pintaev n=ansible | TASK [Gathering Facts] *******************************************************************************************************************************
2024-09-14 15:18:01,901 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:18:01,911 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Get current C-state] **************************************************************************************************
2024-09-14 15:18:06,465 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:18:06,479 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Print current C-state] ************************************************************************************************
2024-09-14 15:18:06,495 p=97571 u=aleksandr.pintaev n=ansible | ok: [test] => {
    "msg": [
        "CPUidle driver: acpi_idle",
        "CPUidle governor: menu",
        "analyzing CPU 0:",
        "",
        "Number of idle states: 2",
        "Available idle states: POLL C1",
        "POLL (DISABLED) :",
        "Flags/Description: CPUIDLE CORE POLL IDLE",
        "Latency: 0",
        "Usage: 3580753365",
        "Duration: 2261236185374",
        "C1 (DISABLED) :",
        "Flags/Description: ACPI HLT",
        "Latency: 0",
        "Usage: 6568633",
        "Duration: 577548689531"
    ]
}
2024-09-14 15:18:06,499 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Disable C-state in GRUB_CMDLINE_LINUX] ********************************************************************************
2024-09-14 15:18:10,954 p=97571 u=aleksandr.pintaev n=ansible | ok: [test] => (item=processor.max_cstate)
2024-09-14 15:18:15,359 p=97571 u=aleksandr.pintaev n=ansible | ok: [test] => (item=intel_idle.max_cstate)
2024-09-14 15:18:15,371 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Disable C-state now] **************************************************************************************************
2024-09-14 15:18:19,962 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:18:19,970 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Install cpufrequtils] *************************************************************************************************
2024-09-14 15:18:31,632 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:18:31,641 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Set governor to performance] ******************************************************************************************
2024-09-14 15:18:40,328 p=97571 u=aleksandr.pintaev n=ansible | ok: [test]
2024-09-14 15:18:40,343 p=97571 u=aleksandr.pintaev n=ansible | TASK [enable_performance_cpu : Verify CPU governor has been set to performance] **********************************************************************
2024-09-14 15:18:44,905 p=97571 u=aleksandr.pintaev n=ansible | fatal: [test]: FAILED! => {"changed": false, "cmd": ["cat", "/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor"], "delta": "0:00:00.040793", "end": "2024-09-14 12:18:44.509574", "msg": "non-zero return code", "rc": 1, "start": "2024-09-14 12:18:44.468781", "stderr": "cat: '/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor': No such file or directory", "stderr_lines": ["cat: '/sys/devices/system/cpu/cpu*/cpufreq/scaling_governor': No such file or directory"], "stdout": "", "stdout_lines": []}
2024-09-14 15:18:44,906 p=97571 u=aleksandr.pintaev n=ansible | PLAY RECAP *******************************************************************************************************************************************
2024-09-14 15:18:44,906 p=97571 u=aleksandr.pintaev n=ansible | test                       : ok=11   changed=0    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
